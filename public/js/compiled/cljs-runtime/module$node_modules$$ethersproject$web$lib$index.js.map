{
"version":3,
"file":"module$node_modules$$ethersproject$web$lib$index.js",
"lineCount":23,
"mappings":"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",
"sources":["node_modules/@ethersproject/web/lib/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$ethersproject$web$lib$index\"] = function(global,require,module,exports) {\n\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.poll = exports.fetchJson = exports._fetchData = void 0;\nvar base64_1 = require(\"@ethersproject/base64\");\nvar bytes_1 = require(\"@ethersproject/bytes\");\nvar properties_1 = require(\"@ethersproject/properties\");\nvar strings_1 = require(\"@ethersproject/strings\");\nvar logger_1 = require(\"@ethersproject/logger\");\nvar _version_1 = require(\"./_version\");\nvar logger = new logger_1.Logger(_version_1.version);\nvar geturl_1 = require(\"./geturl\");\nfunction staller(duration) {\n    return new Promise(function (resolve) {\n        setTimeout(resolve, duration);\n    });\n}\nfunction bodyify(value, type) {\n    if (value == null) {\n        return null;\n    }\n    if (typeof (value) === \"string\") {\n        return value;\n    }\n    if ((0, bytes_1.isBytesLike)(value)) {\n        if (type && (type.split(\"/\")[0] === \"text\" || type.split(\";\")[0].trim() === \"application/json\")) {\n            try {\n                return (0, strings_1.toUtf8String)(value);\n            }\n            catch (error) { }\n            ;\n        }\n        return (0, bytes_1.hexlify)(value);\n    }\n    return value;\n}\nfunction unpercent(value) {\n    return (0, strings_1.toUtf8Bytes)(value.replace(/%([0-9a-f][0-9a-f])/gi, function (all, code) {\n        return String.fromCharCode(parseInt(code, 16));\n    }));\n}\n// This API is still a work in progress; the future changes will likely be:\n// - ConnectionInfo => FetchDataRequest<T = any>\n// - FetchDataRequest.body? = string | Uint8Array | { contentType: string, data: string | Uint8Array }\n//   - If string => text/plain, Uint8Array => application/octet-stream (if content-type unspecified)\n// - FetchDataRequest.processFunc = (body: Uint8Array, response: FetchDataResponse) => T\n// For this reason, it should be considered internal until the API is finalized\nfunction _fetchData(connection, body, processFunc) {\n    // How many times to retry in the event of a throttle\n    var attemptLimit = (typeof (connection) === \"object\" && connection.throttleLimit != null) ? connection.throttleLimit : 12;\n    logger.assertArgument((attemptLimit > 0 && (attemptLimit % 1) === 0), \"invalid connection throttle limit\", \"connection.throttleLimit\", attemptLimit);\n    var throttleCallback = ((typeof (connection) === \"object\") ? connection.throttleCallback : null);\n    var throttleSlotInterval = ((typeof (connection) === \"object\" && typeof (connection.throttleSlotInterval) === \"number\") ? connection.throttleSlotInterval : 100);\n    logger.assertArgument((throttleSlotInterval > 0 && (throttleSlotInterval % 1) === 0), \"invalid connection throttle slot interval\", \"connection.throttleSlotInterval\", throttleSlotInterval);\n    var errorPassThrough = ((typeof (connection) === \"object\") ? !!(connection.errorPassThrough) : false);\n    var headers = {};\n    var url = null;\n    // @TODO: Allow ConnectionInfo to override some of these values\n    var options = {\n        method: \"GET\",\n    };\n    var allow304 = false;\n    var timeout = 2 * 60 * 1000;\n    if (typeof (connection) === \"string\") {\n        url = connection;\n    }\n    else if (typeof (connection) === \"object\") {\n        if (connection == null || connection.url == null) {\n            logger.throwArgumentError(\"missing URL\", \"connection.url\", connection);\n        }\n        url = connection.url;\n        if (typeof (connection.timeout) === \"number\" && connection.timeout > 0) {\n            timeout = connection.timeout;\n        }\n        if (connection.headers) {\n            for (var key in connection.headers) {\n                headers[key.toLowerCase()] = { key: key, value: String(connection.headers[key]) };\n                if ([\"if-none-match\", \"if-modified-since\"].indexOf(key.toLowerCase()) >= 0) {\n                    allow304 = true;\n                }\n            }\n        }\n        options.allowGzip = !!connection.allowGzip;\n        if (connection.user != null && connection.password != null) {\n            if (url.substring(0, 6) !== \"https:\" && connection.allowInsecureAuthentication !== true) {\n                logger.throwError(\"basic authentication requires a secure https url\", logger_1.Logger.errors.INVALID_ARGUMENT, { argument: \"url\", url: url, user: connection.user, password: \"[REDACTED]\" });\n            }\n            var authorization = connection.user + \":\" + connection.password;\n            headers[\"authorization\"] = {\n                key: \"Authorization\",\n                value: \"Basic \" + (0, base64_1.encode)((0, strings_1.toUtf8Bytes)(authorization))\n            };\n        }\n        if (connection.skipFetchSetup != null) {\n            options.skipFetchSetup = !!connection.skipFetchSetup;\n        }\n        if (connection.fetchOptions != null) {\n            options.fetchOptions = (0, properties_1.shallowCopy)(connection.fetchOptions);\n        }\n    }\n    var reData = new RegExp(\"^data:([^;:]*)?(;base64)?,(.*)$\", \"i\");\n    var dataMatch = ((url) ? url.match(reData) : null);\n    if (dataMatch) {\n        try {\n            var response = {\n                statusCode: 200,\n                statusMessage: \"OK\",\n                headers: { \"content-type\": (dataMatch[1] || \"text/plain\") },\n                body: (dataMatch[2] ? (0, base64_1.decode)(dataMatch[3]) : unpercent(dataMatch[3]))\n            };\n            var result = response.body;\n            if (processFunc) {\n                result = processFunc(response.body, response);\n            }\n            return Promise.resolve(result);\n        }\n        catch (error) {\n            logger.throwError(\"processing response error\", logger_1.Logger.errors.SERVER_ERROR, {\n                body: bodyify(dataMatch[1], dataMatch[2]),\n                error: error,\n                requestBody: null,\n                requestMethod: \"GET\",\n                url: url\n            });\n        }\n    }\n    if (body) {\n        options.method = \"POST\";\n        options.body = body;\n        if (headers[\"content-type\"] == null) {\n            headers[\"content-type\"] = { key: \"Content-Type\", value: \"application/octet-stream\" };\n        }\n        if (headers[\"content-length\"] == null) {\n            headers[\"content-length\"] = { key: \"Content-Length\", value: String(body.length) };\n        }\n    }\n    var flatHeaders = {};\n    Object.keys(headers).forEach(function (key) {\n        var header = headers[key];\n        flatHeaders[header.key] = header.value;\n    });\n    options.headers = flatHeaders;\n    var runningTimeout = (function () {\n        var timer = null;\n        var promise = new Promise(function (resolve, reject) {\n            if (timeout) {\n                timer = setTimeout(function () {\n                    if (timer == null) {\n                        return;\n                    }\n                    timer = null;\n                    reject(logger.makeError(\"timeout\", logger_1.Logger.errors.TIMEOUT, {\n                        requestBody: bodyify(options.body, flatHeaders[\"content-type\"]),\n                        requestMethod: options.method,\n                        timeout: timeout,\n                        url: url\n                    }));\n                }, timeout);\n            }\n        });\n        var cancel = function () {\n            if (timer == null) {\n                return;\n            }\n            clearTimeout(timer);\n            timer = null;\n        };\n        return { promise: promise, cancel: cancel };\n    })();\n    var runningFetch = (function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var attempt, response, location_1, tryAgain, stall, retryAfter, error_1, body_1, result, error_2, tryAgain, timeout_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        attempt = 0;\n                        _a.label = 1;\n                    case 1:\n                        if (!(attempt < attemptLimit)) return [3 /*break*/, 20];\n                        response = null;\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 9, , 10]);\n                        return [4 /*yield*/, (0, geturl_1.getUrl)(url, options)];\n                    case 3:\n                        response = _a.sent();\n                        if (!(attempt < attemptLimit)) return [3 /*break*/, 8];\n                        if (!(response.statusCode === 301 || response.statusCode === 302)) return [3 /*break*/, 4];\n                        location_1 = response.headers.location || \"\";\n                        if (options.method === \"GET\" && location_1.match(/^https:/)) {\n                            url = response.headers.location;\n                            return [3 /*break*/, 19];\n                        }\n                        return [3 /*break*/, 8];\n                    case 4:\n                        if (!(response.statusCode === 429)) return [3 /*break*/, 8];\n                        tryAgain = true;\n                        if (!throttleCallback) return [3 /*break*/, 6];\n                        return [4 /*yield*/, throttleCallback(attempt, url)];\n                    case 5:\n                        tryAgain = _a.sent();\n                        _a.label = 6;\n                    case 6:\n                        if (!tryAgain) return [3 /*break*/, 8];\n                        stall = 0;\n                        retryAfter = response.headers[\"retry-after\"];\n                        if (typeof (retryAfter) === \"string\" && retryAfter.match(/^[1-9][0-9]*$/)) {\n                            stall = parseInt(retryAfter) * 1000;\n                        }\n                        else {\n                            stall = throttleSlotInterval * parseInt(String(Math.random() * Math.pow(2, attempt)));\n                        }\n                        //console.log(\"Stalling 429\");\n                        return [4 /*yield*/, staller(stall)];\n                    case 7:\n                        //console.log(\"Stalling 429\");\n                        _a.sent();\n                        return [3 /*break*/, 19];\n                    case 8: return [3 /*break*/, 10];\n                    case 9:\n                        error_1 = _a.sent();\n                        response = error_1.response;\n                        if (response == null) {\n                            runningTimeout.cancel();\n                            logger.throwError(\"missing response\", logger_1.Logger.errors.SERVER_ERROR, {\n                                requestBody: bodyify(options.body, flatHeaders[\"content-type\"]),\n                                requestMethod: options.method,\n                                serverError: error_1,\n                                url: url\n                            });\n                        }\n                        return [3 /*break*/, 10];\n                    case 10:\n                        body_1 = response.body;\n                        if (allow304 && response.statusCode === 304) {\n                            body_1 = null;\n                        }\n                        else if (!errorPassThrough && (response.statusCode < 200 || response.statusCode >= 300)) {\n                            runningTimeout.cancel();\n                            logger.throwError(\"bad response\", logger_1.Logger.errors.SERVER_ERROR, {\n                                status: response.statusCode,\n                                headers: response.headers,\n                                body: bodyify(body_1, ((response.headers) ? response.headers[\"content-type\"] : null)),\n                                requestBody: bodyify(options.body, flatHeaders[\"content-type\"]),\n                                requestMethod: options.method,\n                                url: url\n                            });\n                        }\n                        if (!processFunc) return [3 /*break*/, 18];\n                        _a.label = 11;\n                    case 11:\n                        _a.trys.push([11, 13, , 18]);\n                        return [4 /*yield*/, processFunc(body_1, response)];\n                    case 12:\n                        result = _a.sent();\n                        runningTimeout.cancel();\n                        return [2 /*return*/, result];\n                    case 13:\n                        error_2 = _a.sent();\n                        if (!(error_2.throttleRetry && attempt < attemptLimit)) return [3 /*break*/, 17];\n                        tryAgain = true;\n                        if (!throttleCallback) return [3 /*break*/, 15];\n                        return [4 /*yield*/, throttleCallback(attempt, url)];\n                    case 14:\n                        tryAgain = _a.sent();\n                        _a.label = 15;\n                    case 15:\n                        if (!tryAgain) return [3 /*break*/, 17];\n                        timeout_1 = throttleSlotInterval * parseInt(String(Math.random() * Math.pow(2, attempt)));\n                        //console.log(\"Stalling callback\");\n                        return [4 /*yield*/, staller(timeout_1)];\n                    case 16:\n                        //console.log(\"Stalling callback\");\n                        _a.sent();\n                        return [3 /*break*/, 19];\n                    case 17:\n                        runningTimeout.cancel();\n                        logger.throwError(\"processing response error\", logger_1.Logger.errors.SERVER_ERROR, {\n                            body: bodyify(body_1, ((response.headers) ? response.headers[\"content-type\"] : null)),\n                            error: error_2,\n                            requestBody: bodyify(options.body, flatHeaders[\"content-type\"]),\n                            requestMethod: options.method,\n                            url: url\n                        });\n                        return [3 /*break*/, 18];\n                    case 18:\n                        runningTimeout.cancel();\n                        // If we had a processFunc, it either returned a T or threw above.\n                        // The \"body\" is now a Uint8Array.\n                        return [2 /*return*/, body_1];\n                    case 19:\n                        attempt++;\n                        return [3 /*break*/, 1];\n                    case 20: return [2 /*return*/, logger.throwError(\"failed response\", logger_1.Logger.errors.SERVER_ERROR, {\n                            requestBody: bodyify(options.body, flatHeaders[\"content-type\"]),\n                            requestMethod: options.method,\n                            url: url\n                        })];\n                }\n            });\n        });\n    })();\n    return Promise.race([runningTimeout.promise, runningFetch]);\n}\nexports._fetchData = _fetchData;\nfunction fetchJson(connection, json, processFunc) {\n    var processJsonFunc = function (value, response) {\n        var result = null;\n        if (value != null) {\n            try {\n                result = JSON.parse((0, strings_1.toUtf8String)(value));\n            }\n            catch (error) {\n                logger.throwError(\"invalid JSON\", logger_1.Logger.errors.SERVER_ERROR, {\n                    body: value,\n                    error: error\n                });\n            }\n        }\n        if (processFunc) {\n            result = processFunc(result, response);\n        }\n        return result;\n    };\n    // If we have json to send, we must\n    // - add content-type of application/json (unless already overridden)\n    // - convert the json to bytes\n    var body = null;\n    if (json != null) {\n        body = (0, strings_1.toUtf8Bytes)(json);\n        // Create a connection with the content-type set for JSON\n        var updated = (typeof (connection) === \"string\") ? ({ url: connection }) : (0, properties_1.shallowCopy)(connection);\n        if (updated.headers) {\n            var hasContentType = (Object.keys(updated.headers).filter(function (k) { return (k.toLowerCase() === \"content-type\"); }).length) !== 0;\n            if (!hasContentType) {\n                updated.headers = (0, properties_1.shallowCopy)(updated.headers);\n                updated.headers[\"content-type\"] = \"application/json\";\n            }\n        }\n        else {\n            updated.headers = { \"content-type\": \"application/json\" };\n        }\n        connection = updated;\n    }\n    return _fetchData(connection, body, processJsonFunc);\n}\nexports.fetchJson = fetchJson;\nfunction poll(func, options) {\n    if (!options) {\n        options = {};\n    }\n    options = (0, properties_1.shallowCopy)(options);\n    if (options.floor == null) {\n        options.floor = 0;\n    }\n    if (options.ceiling == null) {\n        options.ceiling = 10000;\n    }\n    if (options.interval == null) {\n        options.interval = 250;\n    }\n    return new Promise(function (resolve, reject) {\n        var timer = null;\n        var done = false;\n        // Returns true if cancel was successful. Unsuccessful cancel means we're already done.\n        var cancel = function () {\n            if (done) {\n                return false;\n            }\n            done = true;\n            if (timer) {\n                clearTimeout(timer);\n            }\n            return true;\n        };\n        if (options.timeout) {\n            timer = setTimeout(function () {\n                if (cancel()) {\n                    reject(new Error(\"timeout\"));\n                }\n            }, options.timeout);\n        }\n        var retryLimit = options.retryLimit;\n        var attempt = 0;\n        function check() {\n            return func().then(function (result) {\n                // If we have a result, or are allowed null then we're done\n                if (result !== undefined) {\n                    if (cancel()) {\n                        resolve(result);\n                    }\n                }\n                else if (options.oncePoll) {\n                    options.oncePoll.once(\"poll\", check);\n                }\n                else if (options.onceBlock) {\n                    options.onceBlock.once(\"block\", check);\n                    // Otherwise, exponential back-off (up to 10s) our next request\n                }\n                else if (!done) {\n                    attempt++;\n                    if (attempt > retryLimit) {\n                        if (cancel()) {\n                            reject(new Error(\"retry limit reached\"));\n                        }\n                        return;\n                    }\n                    var timeout = options.interval * parseInt(String(Math.random() * Math.pow(2, attempt)));\n                    if (timeout < options.floor) {\n                        timeout = options.floor;\n                    }\n                    if (timeout > options.ceiling) {\n                        timeout = options.ceiling;\n                    }\n                    setTimeout(check, timeout);\n                }\n                return null;\n            }, function (error) {\n                if (cancel()) {\n                    reject(error);\n                }\n            });\n        }\n        check();\n    });\n}\nexports.poll = poll;\n//# sourceMappingURL=index.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","staller","duration","Promise","resolve","setTimeout","bodyify","value","type","bytes_1","isBytesLike","split","trim","strings_1","toUtf8String","error","hexlify","unpercent","toUtf8Bytes","replace","all","code","String","fromCharCode","parseInt","_fetchData","connection","body","processFunc","attemptLimit","throttleLimit","logger","assertArgument","throttleCallback","throttleSlotInterval","errorPassThrough","headers","url","options","method","allow304","timeout","throwArgumentError","key","toLowerCase","indexOf","allowGzip","user","password","substring","allowInsecureAuthentication","throwError","logger_1","Logger","errors","INVALID_ARGUMENT","argument","base64_1","encode","skipFetchSetup","fetchOptions","properties_1","shallowCopy","reData","RegExp","dataMatch","match","response","statusCode","statusMessage","decode","result","SERVER_ERROR","requestBody","requestMethod","length","flatHeaders","Object","keys","forEach","header","runningTimeout","timer","promise","reject","makeError","TIMEOUT","cancel","clearTimeout","runningFetch","__awaiter","attempt","location_1","tryAgain","stall","retryAfter","error_1","body_1","error_2","timeout_1","__generator","_a","label","trys","push","geturl_1","getUrl","sent","location","Math","random","pow","serverError","status","throttleRetry","race","thisArg","_arguments","P","generator","adopt","fulfilled","step","next","e","rejected","done","then","apply","verb","n","v","op","f","TypeError","_","y","t","call","ops","pop","g","Symbol","iterator","defineProperty","poll","fetchJson","_version_1","version","json","updated","filter","k","processJsonFunc","JSON","parse","func","floor","ceiling","interval","check","undefined","oncePoll","once","onceBlock","retryLimit","Error"]
}
