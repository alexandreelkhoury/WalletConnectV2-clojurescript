["^ ","~:resource-id",["~:shadow.build.npm/resource","node_modules/viem/_cjs/clients/transports/webSocket.js"],"~:js","shadow$provide.module$node_modules$viem$_cjs$clients$transports$webSocket=function(global,require,module,exports){Object.defineProperty(exports,\"__esModule\",{value:!0});exports.webSocket=void 0;const request_js_1=require(\"module$node_modules$viem$_cjs$errors$request\"),transport_js_1=require(\"module$node_modules$viem$_cjs$errors$transport\"),rpc_js_1=require(\"module$node_modules$viem$_cjs$utils$rpc\"),createTransport_js_1=require(\"module$node_modules$viem$_cjs$clients$transports$createTransport\");exports.webSocket=\nfunction(url,config={}){const {key=\"webSocket\",name=\"WebSocket JSON-RPC\",retryDelay}=config;return({chain,retryCount:retryCount_,timeout:timeout_})=>{retryCount_=config.retryCount??retryCount_;const timeout=timeout_??config.timeout??1E4,url_=url||chain?.rpcUrls.default.webSocket?.[0];if(!url_)throw new transport_js_1.UrlRequiredError;return(0,createTransport_js_1.createTransport)({key,name,async request({method,params}){method={method,params};params=await (0,rpc_js_1.getSocket)(url_);const {error,\nresult}=await rpc_js_1.rpc.webSocketAsync(params,{body:method,timeout});if(error)throw new request_js_1.RpcRequestError({body:method,error,url:url_});return result},retryCount:retryCount_,retryDelay,timeout,type:\"webSocket\"},{getSocket(){return(0,rpc_js_1.getSocket)(url_)},async subscribe({params,onData,onError}){const socket=await (0,rpc_js_1.getSocket)(url_),{result:subscriptionId}=await new Promise((resolve,reject)=>rpc_js_1.rpc.webSocket(socket,{body:{method:\"eth_subscribe\",params},onResponse(response){response.error?\n(reject(response.error),onError?.(response.error)):\"number\"===typeof response.id?resolve(response):\"eth_subscription\"===response.method&&onData(response.params)}}));return{subscriptionId,async unsubscribe(){return new Promise(resolve=>rpc_js_1.rpc.webSocket(socket,{body:{method:\"eth_unsubscribe\",params:[subscriptionId]},onResponse:resolve}))}}}})}}}","~:source","shadow$provide[\"module$node_modules$viem$_cjs$clients$transports$webSocket\"] = function(global,require,module,exports) {\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.webSocket = void 0;\nconst request_js_1 = require(\"../../errors/request.js\");\nconst transport_js_1 = require(\"../../errors/transport.js\");\nconst rpc_js_1 = require(\"../../utils/rpc.js\");\nconst createTransport_js_1 = require(\"./createTransport.js\");\nfunction webSocket(url, config = {}) {\n    const { key = 'webSocket', name = 'WebSocket JSON-RPC', retryDelay } = config;\n    return ({ chain, retryCount: retryCount_, timeout: timeout_ }) => {\n        const retryCount = config.retryCount ?? retryCount_;\n        const timeout = timeout_ ?? config.timeout ?? 10000;\n        const url_ = url || chain?.rpcUrls.default.webSocket?.[0];\n        if (!url_)\n            throw new transport_js_1.UrlRequiredError();\n        return (0, createTransport_js_1.createTransport)({\n            key,\n            name,\n            async request({ method, params }) {\n                const body = { method, params };\n                const socket = await (0, rpc_js_1.getSocket)(url_);\n                const { error, result } = await rpc_js_1.rpc.webSocketAsync(socket, {\n                    body,\n                    timeout,\n                });\n                if (error)\n                    throw new request_js_1.RpcRequestError({\n                        body,\n                        error,\n                        url: url_,\n                    });\n                return result;\n            },\n            retryCount,\n            retryDelay,\n            timeout,\n            type: 'webSocket',\n        }, {\n            getSocket() {\n                return (0, rpc_js_1.getSocket)(url_);\n            },\n            async subscribe({ params, onData, onError }) {\n                const socket = await (0, rpc_js_1.getSocket)(url_);\n                const { result: subscriptionId } = await new Promise((resolve, reject) => rpc_js_1.rpc.webSocket(socket, {\n                    body: {\n                        method: 'eth_subscribe',\n                        params,\n                    },\n                    onResponse(response) {\n                        if (response.error) {\n                            reject(response.error);\n                            onError?.(response.error);\n                            return;\n                        }\n                        if (typeof response.id === 'number') {\n                            resolve(response);\n                            return;\n                        }\n                        if (response.method !== 'eth_subscription')\n                            return;\n                        onData(response.params);\n                    },\n                }));\n                return {\n                    subscriptionId,\n                    async unsubscribe() {\n                        return new Promise((resolve) => rpc_js_1.rpc.webSocket(socket, {\n                            body: {\n                                method: 'eth_unsubscribe',\n                                params: [subscriptionId],\n                            },\n                            onResponse: resolve,\n                        }));\n                    },\n                };\n            },\n        });\n    };\n}\nexports.webSocket = webSocket;\n//# sourceMappingURL=webSocket.js.map\n};","~:removed-requires",["~#set",[]],"~:actual-requires",["^5",["~$module$node_modules$viem$_cjs$clients$transports$createTransport","~$module$node_modules$viem$_cjs$utils$rpc","~$shadow.js","~$module$node_modules$viem$_cjs$errors$transport","~$module$node_modules$viem$_cjs$errors$request"]],"~:properties",["^5",["url","body","params","method","key","__esModule","webSocket","error","subscriptionId","name","value","onResponse","retryCount","timeout","retryDelay","type"]],"~:compiled-at",1695111490366,"~:source-map-json","{\n\"version\":3,\n\"file\":\"module$node_modules$viem$_cjs$clients$transports$webSocket.js\",\n\"lineCount\":4,\n\"mappings\":\"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\",\n\"sources\":[\"node_modules/viem/_cjs/clients/transports/webSocket.js\"],\n\"sourcesContent\":[\"shadow$provide[\\\"module$node_modules$viem$_cjs$clients$transports$webSocket\\\"] = function(global,require,module,exports) {\\n\\\"use strict\\\";\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.webSocket = void 0;\\nconst request_js_1 = require(\\\"../../errors/request.js\\\");\\nconst transport_js_1 = require(\\\"../../errors/transport.js\\\");\\nconst rpc_js_1 = require(\\\"../../utils/rpc.js\\\");\\nconst createTransport_js_1 = require(\\\"./createTransport.js\\\");\\nfunction webSocket(url, config = {}) {\\n    const { key = 'webSocket', name = 'WebSocket JSON-RPC', retryDelay } = config;\\n    return ({ chain, retryCount: retryCount_, timeout: timeout_ }) => {\\n        const retryCount = config.retryCount ?? retryCount_;\\n        const timeout = timeout_ ?? config.timeout ?? 10000;\\n        const url_ = url || chain?.rpcUrls.default.webSocket?.[0];\\n        if (!url_)\\n            throw new transport_js_1.UrlRequiredError();\\n        return (0, createTransport_js_1.createTransport)({\\n            key,\\n            name,\\n            async request({ method, params }) {\\n                const body = { method, params };\\n                const socket = await (0, rpc_js_1.getSocket)(url_);\\n                const { error, result } = await rpc_js_1.rpc.webSocketAsync(socket, {\\n                    body,\\n                    timeout,\\n                });\\n                if (error)\\n                    throw new request_js_1.RpcRequestError({\\n                        body,\\n                        error,\\n                        url: url_,\\n                    });\\n                return result;\\n            },\\n            retryCount,\\n            retryDelay,\\n            timeout,\\n            type: 'webSocket',\\n        }, {\\n            getSocket() {\\n                return (0, rpc_js_1.getSocket)(url_);\\n            },\\n            async subscribe({ params, onData, onError }) {\\n                const socket = await (0, rpc_js_1.getSocket)(url_);\\n                const { result: subscriptionId } = await new Promise((resolve, reject) => rpc_js_1.rpc.webSocket(socket, {\\n                    body: {\\n                        method: 'eth_subscribe',\\n                        params,\\n                    },\\n                    onResponse(response) {\\n                        if (response.error) {\\n                            reject(response.error);\\n                            onError?.(response.error);\\n                            return;\\n                        }\\n                        if (typeof response.id === 'number') {\\n                            resolve(response);\\n                            return;\\n                        }\\n                        if (response.method !== 'eth_subscription')\\n                            return;\\n                        onData(response.params);\\n                    },\\n                }));\\n                return {\\n                    subscriptionId,\\n                    async unsubscribe() {\\n                        return new Promise((resolve) => rpc_js_1.rpc.webSocket(socket, {\\n                            body: {\\n                                method: 'eth_unsubscribe',\\n                                params: [subscriptionId],\\n                            },\\n                            onResponse: resolve,\\n                        }));\\n                    },\\n                };\\n            },\\n        });\\n    };\\n}\\nexports.webSocket = webSocket;\\n//# sourceMappingURL=webSocket.js.map\\n};\"],\n\"names\":[\"shadow$provide\",\"global\",\"require\",\"module\",\"exports\",\"Object\",\"defineProperty\",\"value\",\"webSocket\",\"request_js_1\",\"transport_js_1\",\"rpc_js_1\",\"createTransport_js_1\",\"url\",\"config\",\"key\",\"name\",\"retryDelay\",\"chain\",\"retryCount_\",\"timeout_\",\"retryCount\",\"timeout\",\"url_\",\"rpcUrls\",\"default\",\"UrlRequiredError\",\"createTransport\",\"request\",\"method\",\"params\",\"body\",\"socket\",\"getSocket\",\"error\",\"result\",\"rpc\",\"webSocketAsync\",\"RpcRequestError\",\"type\",\"subscribe\",\"onData\",\"onError\",\"subscriptionId\",\"Promise\",\"resolve\",\"reject\",\"onResponse\",\"response\",\"id\",\"unsubscribe\"]\n}\n"]