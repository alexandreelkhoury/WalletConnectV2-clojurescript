["^ ","~:resource-id",["~:shadow.build.npm/resource","node_modules/@ethersproject/providers/lib/fallback-provider.js"],"~:js","shadow$provide[345]=function(S,A,V,q){function F(b){for(var c=null,d=0;d<b.length;d++){var f=b[d];if(null==f)return null;c?(c.name!==f.name||c.chainId!==f.chainId||c.ensAddress!==f.ensAddress&&(null!=c.ensAddress||null!=f.ensAddress))&&J.throwArgumentError(\"provider mismatch\",\"networks\",b):c=f}return c}function G(b,c){b=b.slice().sort();var d=Math.floor(b.length/2);if(b.length%2)return b[d];var f=b[d-1];b=b[d];return null!=c&&Math.abs(f-b)>c?null:(f+b)/2}function r(b){if(null===b)return\"null\";if(\"number\"===\ntypeof b||\"boolean\"===typeof b)return JSON.stringify(b);if(\"string\"===typeof b)return b;if(E.BigNumber.isBigNumber(b))return b.toString();if(Array.isArray(b))return JSON.stringify(b.map(function(d){return r(d)}));if(\"object\"===typeof b){var c=Object.keys(b);c.sort();return\"{\"+c.map(function(d){var f=b[d];f=\"function\"===typeof f?\"[function]\":r(f);return JSON.stringify(d)+\":\"+f}).join(\",\")+\"}\"}throw Error(\"unknown value type: \"+typeof b);}function y(b){var c=null,d=null,f=new Promise(function(g){c=\nfunction(){d&&(clearTimeout(d),d=null);g()};d=setTimeout(c,b)});return{cancel:c,getPromise:function(){return f},wait:function(g){return f=f.then(g)}}}function e(b,c){var d={weight:b.weight};Object.defineProperty(d,\"provider\",{get:function(){return b.provider}});b.start&&(d.start=b.start);c&&(d.duration=c-b.start);b.done&&(b.error?d.error=b.error:d.result=b.result||null);return d}function u(b,c){return function(d){var f={};d.forEach(function(w){var x=b(w.result);f[x]||(f[x]={count:0,result:w.result});\nf[x].count++});d=Object.keys(f);for(var g=0;g<d.length;g++){var m=f[d[g]];if(m.count>=c)return m.result}}}function p(b,c,d){var f=r;switch(c){case \"getBlockNumber\":return function(g){var m=g.map(function(w){return w.result});g=G(g.map(function(w){return w.result}),2);if(null!=g)return g=Math.ceil(g),0<=m.indexOf(g+1)&&g++,g>=b._highestBlockNumber&&(b._highestBlockNumber=g),b._highestBlockNumber};case \"getGasPrice\":return function(g){g=g.map(function(m){return m.result});g.sort();return g[Math.floor(g.length/\n2)]};case \"getEtherPrice\":return function(g){return G(g.map(function(m){return m.result}))};case \"getBalance\":case \"getTransactionCount\":case \"getCode\":case \"getStorageAt\":case \"call\":case \"estimateGas\":case \"getLogs\":break;case \"getTransaction\":case \"getTransactionReceipt\":f=function(g){if(null==g)return null;g=(0,D.shallowCopy)(g);g.confirmations=-1;return r(g)};break;case \"getBlock\":f=d.includeTransactions?function(g){if(null==g)return null;g=(0,D.shallowCopy)(g);g.transactions=g.transactions.map(function(m){m=\n(0,D.shallowCopy)(m);m.confirmations=-1;return m});return r(g)}:function(g){return null==g?null:r(g)};break;default:throw Error(\"unknown method: \"+c);}return u(f,b.quorum)}function n(b,c){return k(this,void 0,void 0,function(){var d;return t(this,function(f){d=b.provider;return null!=d.blockNumber&&d.blockNumber>=c||-1===c?[2,d]:[2,(0,I.poll)(function(){return new Promise(function(g,m){setTimeout(function(){return d.blockNumber>=c?g(d):b.cancelled?g(null):g(void 0)},0)})},{oncePoll:d})]})})}function l(b,\nc,d,f){return k(this,void 0,void 0,function(){var g,m,w;return t(this,function(x){switch(x.label){case 0:g=b.provider;m=d;switch(m){case \"getBlockNumber\":return[3,1];case \"getGasPrice\":return[3,1];case \"getEtherPrice\":return[3,2];case \"getBalance\":return[3,3];case \"getTransactionCount\":return[3,3];case \"getCode\":return[3,3];case \"getStorageAt\":return[3,6];case \"getBlock\":return[3,9];case \"call\":return[3,12];case \"estimateGas\":return[3,12];case \"getTransaction\":return[3,15];case \"getTransactionReceipt\":return[3,\n15];case \"getLogs\":return[3,16]}return[3,19];case 1:return[2,g[d]()];case 2:return g.getEtherPrice?[2,g.getEtherPrice()]:[3,19];case 3:return f.blockTag&&(0,H.isHexString)(f.blockTag)?[4,n(b,c)]:[3,5];case 4:g=x.sent(),x.label=5;case 5:return[2,g[d](f.address,f.blockTag||\"latest\")];case 6:return f.blockTag&&(0,H.isHexString)(f.blockTag)?[4,n(b,c)]:[3,8];case 7:g=x.sent(),x.label=8;case 8:return[2,g.getStorageAt(f.address,f.position,f.blockTag||\"latest\")];case 9:return f.blockTag&&(0,H.isHexString)(f.blockTag)?\n[4,n(b,c)]:[3,11];case 10:g=x.sent(),x.label=11;case 11:return[2,g[f.includeTransactions?\"getBlockWithTransactions\":\"getBlock\"](f.blockTag||f.blockHash)];case 12:return f.blockTag&&(0,H.isHexString)(f.blockTag)?[4,n(b,c)]:[3,14];case 13:g=x.sent(),x.label=14;case 14:return\"call\"===d&&f.blockTag?[2,g[d](f.transaction,f.blockTag)]:[2,g[d](f.transaction)];case 15:return[2,g[d](f.transactionHash)];case 16:return w=f.filter,w.fromBlock&&(0,H.isHexString)(w.fromBlock)||w.toBlock&&(0,H.isHexString)(w.toBlock)?\n[4,n(b,c)]:[3,18];case 17:g=x.sent(),x.label=18;case 18:return[2,g.getLogs(w)];case 19:return[2,J.throwError(\"unknown method error\",P.Logger.errors.UNKNOWN_ERROR,{method:d,params:f})]}})})}var h=this&&this.__extends||function(){var b=function(c,d){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(f[m]=g[m])};return b(c,d)};return function(c,d){function f(){this.constructor=c}if(\"function\"!==\ntypeof d&&null!==d)throw new TypeError(\"Class extends value \"+String(d)+\" is not a constructor or null\");b(c,d);c.prototype=null===d?Object.create(d):(f.prototype=d.prototype,new f)}}(),k=this&&this.__awaiter||function(b,c,d,f){function g(m){return m instanceof d?m:new d(function(w){w(m)})}return new (d||(d=Promise))(function(m,w){function x(R){try{v(f.next(R))}catch(O){w(O)}}function z(R){try{v(f[\"throw\"](R))}catch(O){w(O)}}function v(R){R.done?m(R.value):g(R.value).then(x,z)}v((f=f.apply(b,c||[])).next())})},\nt=this&&this.__generator||function(b,c){function d(v){return function(R){return f([v,R])}}function f(v){if(m)throw new TypeError(\"Generator is already executing.\");for(;g;)try{if(m=1,w&&(x=v[0]&2?w[\"return\"]:v[0]?w[\"throw\"]||((x=w[\"return\"])&&x.call(w),0):w.next)&&!(x=x.call(w,v[1])).done)return x;if(w=0,x)v=[v[0]&2,x.value];switch(v[0]){case 0:case 1:x=v;break;case 4:return g.label++,{value:v[1],done:!1};case 5:g.label++;w=v[1];v=[0];continue;case 7:v=g.ops.pop();g.trys.pop();continue;default:if(!(x=\ng.trys,x=0<x.length&&x[x.length-1])&&(6===v[0]||2===v[0])){g=0;continue}if(3===v[0]&&(!x||v[1]>x[0]&&v[1]<x[3]))g.label=v[1];else if(6===v[0]&&g.label<x[1])g.label=x[1],x=v;else if(x&&g.label<x[2])g.label=x[2],g.ops.push(v);else{x[2]&&g.ops.pop();g.trys.pop();continue}}v=c.call(b,g)}catch(R){v=[6,R],w=0}finally{m=x=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}var g={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},m,w,x,z;return z={next:d(0),\"throw\":d(1),\n\"return\":d(2)},\"function\"===typeof Symbol&&(z[Symbol.iterator]=function(){return this}),z};Object.defineProperty(q,\"__esModule\",{value:!0});q.FallbackProvider=void 0;var B=A(66),E=A(15),H=A(11),D=A(17),C=A(284),I=A(331);S=A(335);var M=A(334),P=A(9);A=A(333);var J=new P.Logger(A.version),T=1,N=[P.Logger.errors.CALL_EXCEPTION,P.Logger.errors.INSUFFICIENT_FUNDS,P.Logger.errors.NONCE_EXPIRED,P.Logger.errors.REPLACEMENT_UNDERPRICED,P.Logger.errors.UNPREDICTABLE_GAS_LIMIT],a=\"address args errorArgs errorSignature method transaction\".split(\" \");\nA=function(b){function c(d,f){var g=this;0===d.length&&J.throwArgumentError(\"missing providers\",\"providers\",d);d=d.map(function(w,x){if(B.Provider.isProvider(w))return x=(0,M.isCommunityResource)(w)?2E3:750,Object.freeze({provider:w,weight:1,stallTimeout:x,priority:1});var z=(0,D.shallowCopy)(w);null==z.priority&&(z.priority=1);null==z.stallTimeout&&(z.stallTimeout=(0,M.isCommunityResource)(w)?2E3:750);null==z.weight&&(z.weight=1);w=z.weight;(w%1||512<w||1>w)&&J.throwArgumentError(\"invalid weight; must be integer in [1, 512]\",\n\"providers[\"+x+\"].weight\",w);return Object.freeze(z)});var m=d.reduce(function(w,x){return w+x.weight},0);null==f?f=m/2:f>m&&J.throwArgumentError(\"quorum will always fail; larger than total weight\",\"quorum\",f);m=F(d.map(function(w){return w.provider.network}));null==m&&(m=new Promise(function(w,x){setTimeout(function(){g.detectNetwork().then(w,x)},0)}));g=b.call(this,m)||this;(0,D.defineReadOnly)(g,\"providerConfigs\",Object.freeze(d));(0,D.defineReadOnly)(g,\"quorum\",f);g._highestBlockNumber=-1;return g}\nh(c,b);c.prototype.detectNetwork=function(){return k(this,void 0,void 0,function(){var d;return t(this,function(f){switch(f.label){case 0:return[4,Promise.all(this.providerConfigs.map(function(g){return g.provider.getNetwork()}))];case 1:return d=f.sent(),[2,F(d)]}})})};c.prototype.perform=function(d,f){return k(this,void 0,void 0,function(){var g,m,w,x,z,v,R,O,L,Q,W,Z=this;return t(this,function(da){switch(da.label){case 0:return\"sendTransaction\"!==d?[3,2]:[4,Promise.all(this.providerConfigs.map(function(X){return X.provider.sendTransaction(f.signedTransaction).then(function(Y){return Y.hash},\nfunction(Y){return Y})}))];case 1:g=da.sent();for(m=0;m<g.length;m++)if(w=g[m],\"string\"===typeof w)return[2,w];throw g[0];case 2:return-1!==this._highestBlockNumber||\"getBlockNumber\"===d?[3,4]:[4,this.getBlockNumber()];case 3:da.sent(),da.label=4;case 4:x=p(this,d,f),z=(0,C.shuffled)(this.providerConfigs.map(D.shallowCopy)),z.sort(function(X,Y){return X.priority-Y.priority}),v=this._highestBlockNumber,R=0,O=!0,L=function(){var X,Y,aa,ca,ea,ja,ka;return t(this,function(la){switch(la.label){case 0:X=\n(new Date).getTime();Y=z.filter(function(ia){return ia.runner&&X-ia.start<ia.stallTimeout}).reduce(function(ia,na){return ia+na.weight},0);for(aa=function(){var ia=z[R++],na=T++;ia.start=(new Date).getTime();ia.staller=y(ia.stallTimeout);ia.staller.wait(function(){ia.staller=null});ia.runner=l(ia,v,d,f).then(function(ua){ia.done=!0;ia.result=ua;Z.listenerCount(\"debug\")&&Z.emit(\"debug\",{action:\"request\",rid:na,backend:e(ia,(new Date).getTime()),request:{method:d,params:(0,D.deepCopy)(f)},provider:Z})},\nfunction(ua){ia.done=!0;ia.error=ua;Z.listenerCount(\"debug\")&&Z.emit(\"debug\",{action:\"request\",rid:na,backend:e(ia,(new Date).getTime()),request:{method:d,params:(0,D.deepCopy)(f)},provider:Z})});Q.listenerCount(\"debug\")&&Q.emit(\"debug\",{action:\"request\",rid:na,backend:e(ia,null),request:{method:d,params:(0,D.deepCopy)(f)},provider:Q});Y+=ia.weight};Y<Q.quorum&&R<z.length;)aa();ca=[];z.forEach(function(ia){!ia.done&&ia.runner&&(ca.push(ia.runner),ia.staller&&ca.push(ia.staller.getPromise()))});return ca.length?\n[4,Promise.race(ca)]:[3,2];case 1:la.sent(),la.label=2;case 2:ea=z.filter(function(ia){return ia.done&&null==ia.error});if(!(ea.length>=Q.quorum))return[3,5];ja=x(ea);return void 0!==ja?(z.forEach(function(ia){ia.staller&&ia.staller.cancel();ia.cancelled=!0}),[2,{value:ja}]):O?[3,4]:[4,y(100).getPromise()];case 3:la.sent(),la.label=4;case 4:O=!1,la.label=5;case 5:return ka=z.reduce(function(ia,na){if(!na.done||null==na.error)return ia;var ua=na.error.code;0<=N.indexOf(ua)&&(ia[ua]||(ia[ua]={error:na.error,\nweight:0}),ia[ua].weight+=na.weight);return ia},{}),Object.keys(ka).forEach(function(ia){var na=ka[ia];if(!(na.weight<Z.quorum)){z.forEach(function(oa){oa.staller&&oa.staller.cancel();oa.cancelled=!0});var ua=na.error,qa={};a.forEach(function(oa){null!=ua[oa]&&(qa[oa]=ua[oa])});J.throwError(ua.reason||ua.message,ia,qa)}}),0===z.filter(function(ia){return!ia.done}).length?[2,\"break\"]:[2]}})},Q=this,da.label=5;case 5:return[5,L()];case 6:return W=da.sent(),\"object\"===typeof W?[2,W.value]:\"break\"===\nW?[3,7]:[3,5];case 7:return z.forEach(function(X){X.staller&&X.staller.cancel();X.cancelled=!0}),[2,J.throwError(\"failed to meet quorum\",P.Logger.errors.SERVER_ERROR,{method:d,params:f,results:z.map(function(X){return e(X)}),provider:this})]}})})};return c}(S.BaseProvider);q.FallbackProvider=A}","~:source","shadow$provide[345] = function(global,require,module,exports) {\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FallbackProvider = void 0;\nvar abstract_provider_1 = require(\"@ethersproject/abstract-provider\");\nvar bignumber_1 = require(\"@ethersproject/bignumber\");\nvar bytes_1 = require(\"@ethersproject/bytes\");\nvar properties_1 = require(\"@ethersproject/properties\");\nvar random_1 = require(\"@ethersproject/random\");\nvar web_1 = require(\"@ethersproject/web\");\nvar base_provider_1 = require(\"./base-provider\");\nvar formatter_1 = require(\"./formatter\");\nvar logger_1 = require(\"@ethersproject/logger\");\nvar _version_1 = require(\"./_version\");\nvar logger = new logger_1.Logger(_version_1.version);\nfunction now() { return (new Date()).getTime(); }\n// Returns to network as long as all agree, or null if any is null.\n// Throws an error if any two networks do not match.\nfunction checkNetworks(networks) {\n    var result = null;\n    for (var i = 0; i < networks.length; i++) {\n        var network = networks[i];\n        // Null! We do not know our network; bail.\n        if (network == null) {\n            return null;\n        }\n        if (result) {\n            // Make sure the network matches the previous networks\n            if (!(result.name === network.name && result.chainId === network.chainId &&\n                ((result.ensAddress === network.ensAddress) || (result.ensAddress == null && network.ensAddress == null)))) {\n                logger.throwArgumentError(\"provider mismatch\", \"networks\", networks);\n            }\n        }\n        else {\n            result = network;\n        }\n    }\n    return result;\n}\nfunction median(values, maxDelta) {\n    values = values.slice().sort();\n    var middle = Math.floor(values.length / 2);\n    // Odd length; take the middle\n    if (values.length % 2) {\n        return values[middle];\n    }\n    // Even length; take the average of the two middle\n    var a = values[middle - 1], b = values[middle];\n    if (maxDelta != null && Math.abs(a - b) > maxDelta) {\n        return null;\n    }\n    return (a + b) / 2;\n}\nfunction serialize(value) {\n    if (value === null) {\n        return \"null\";\n    }\n    else if (typeof (value) === \"number\" || typeof (value) === \"boolean\") {\n        return JSON.stringify(value);\n    }\n    else if (typeof (value) === \"string\") {\n        return value;\n    }\n    else if (bignumber_1.BigNumber.isBigNumber(value)) {\n        return value.toString();\n    }\n    else if (Array.isArray(value)) {\n        return JSON.stringify(value.map(function (i) { return serialize(i); }));\n    }\n    else if (typeof (value) === \"object\") {\n        var keys = Object.keys(value);\n        keys.sort();\n        return \"{\" + keys.map(function (key) {\n            var v = value[key];\n            if (typeof (v) === \"function\") {\n                v = \"[function]\";\n            }\n            else {\n                v = serialize(v);\n            }\n            return JSON.stringify(key) + \":\" + v;\n        }).join(\",\") + \"}\";\n    }\n    throw new Error(\"unknown value type: \" + typeof (value));\n}\n// Next request ID to use for emitting debug info\nvar nextRid = 1;\n;\nfunction stall(duration) {\n    var cancel = null;\n    var timer = null;\n    var promise = (new Promise(function (resolve) {\n        cancel = function () {\n            if (timer) {\n                clearTimeout(timer);\n                timer = null;\n            }\n            resolve();\n        };\n        timer = setTimeout(cancel, duration);\n    }));\n    var wait = function (func) {\n        promise = promise.then(func);\n        return promise;\n    };\n    function getPromise() {\n        return promise;\n    }\n    return { cancel: cancel, getPromise: getPromise, wait: wait };\n}\nvar ForwardErrors = [\n    logger_1.Logger.errors.CALL_EXCEPTION,\n    logger_1.Logger.errors.INSUFFICIENT_FUNDS,\n    logger_1.Logger.errors.NONCE_EXPIRED,\n    logger_1.Logger.errors.REPLACEMENT_UNDERPRICED,\n    logger_1.Logger.errors.UNPREDICTABLE_GAS_LIMIT\n];\nvar ForwardProperties = [\n    \"address\",\n    \"args\",\n    \"errorArgs\",\n    \"errorSignature\",\n    \"method\",\n    \"transaction\",\n];\n;\nfunction exposeDebugConfig(config, now) {\n    var result = {\n        weight: config.weight\n    };\n    Object.defineProperty(result, \"provider\", { get: function () { return config.provider; } });\n    if (config.start) {\n        result.start = config.start;\n    }\n    if (now) {\n        result.duration = (now - config.start);\n    }\n    if (config.done) {\n        if (config.error) {\n            result.error = config.error;\n        }\n        else {\n            result.result = config.result || null;\n        }\n    }\n    return result;\n}\nfunction normalizedTally(normalize, quorum) {\n    return function (configs) {\n        // Count the votes for each result\n        var tally = {};\n        configs.forEach(function (c) {\n            var value = normalize(c.result);\n            if (!tally[value]) {\n                tally[value] = { count: 0, result: c.result };\n            }\n            tally[value].count++;\n        });\n        // Check for a quorum on any given result\n        var keys = Object.keys(tally);\n        for (var i = 0; i < keys.length; i++) {\n            var check = tally[keys[i]];\n            if (check.count >= quorum) {\n                return check.result;\n            }\n        }\n        // No quroum\n        return undefined;\n    };\n}\nfunction getProcessFunc(provider, method, params) {\n    var normalize = serialize;\n    switch (method) {\n        case \"getBlockNumber\":\n            // Return the median value, unless there is (median + 1) is also\n            // present, in which case that is probably true and the median\n            // is going to be stale soon. In the event of a malicious node,\n            // the lie will be true soon enough.\n            return function (configs) {\n                var values = configs.map(function (c) { return c.result; });\n                // Get the median block number\n                var blockNumber = median(configs.map(function (c) { return c.result; }), 2);\n                if (blockNumber == null) {\n                    return undefined;\n                }\n                blockNumber = Math.ceil(blockNumber);\n                // If the next block height is present, its prolly safe to use\n                if (values.indexOf(blockNumber + 1) >= 0) {\n                    blockNumber++;\n                }\n                // Don't ever roll back the blockNumber\n                if (blockNumber >= provider._highestBlockNumber) {\n                    provider._highestBlockNumber = blockNumber;\n                }\n                return provider._highestBlockNumber;\n            };\n        case \"getGasPrice\":\n            // Return the middle (round index up) value, similar to median\n            // but do not average even entries and choose the higher.\n            // Malicious actors must compromise 50% of the nodes to lie.\n            return function (configs) {\n                var values = configs.map(function (c) { return c.result; });\n                values.sort();\n                return values[Math.floor(values.length / 2)];\n            };\n        case \"getEtherPrice\":\n            // Returns the median price. Malicious actors must compromise at\n            // least 50% of the nodes to lie (in a meaningful way).\n            return function (configs) {\n                return median(configs.map(function (c) { return c.result; }));\n            };\n        // No additional normalizing required; serialize is enough\n        case \"getBalance\":\n        case \"getTransactionCount\":\n        case \"getCode\":\n        case \"getStorageAt\":\n        case \"call\":\n        case \"estimateGas\":\n        case \"getLogs\":\n            break;\n        // We drop the confirmations from transactions as it is approximate\n        case \"getTransaction\":\n        case \"getTransactionReceipt\":\n            normalize = function (tx) {\n                if (tx == null) {\n                    return null;\n                }\n                tx = (0, properties_1.shallowCopy)(tx);\n                tx.confirmations = -1;\n                return serialize(tx);\n            };\n            break;\n        // We drop the confirmations from transactions as it is approximate\n        case \"getBlock\":\n            // We drop the confirmations from transactions as it is approximate\n            if (params.includeTransactions) {\n                normalize = function (block) {\n                    if (block == null) {\n                        return null;\n                    }\n                    block = (0, properties_1.shallowCopy)(block);\n                    block.transactions = block.transactions.map(function (tx) {\n                        tx = (0, properties_1.shallowCopy)(tx);\n                        tx.confirmations = -1;\n                        return tx;\n                    });\n                    return serialize(block);\n                };\n            }\n            else {\n                normalize = function (block) {\n                    if (block == null) {\n                        return null;\n                    }\n                    return serialize(block);\n                };\n            }\n            break;\n        default:\n            throw new Error(\"unknown method: \" + method);\n    }\n    // Return the result if and only if the expected quorum is\n    // satisfied and agreed upon for the final result.\n    return normalizedTally(normalize, provider.quorum);\n}\n// If we are doing a blockTag query, we need to make sure the backend is\n// caught up to the FallbackProvider, before sending a request to it.\nfunction waitForSync(config, blockNumber) {\n    return __awaiter(this, void 0, void 0, function () {\n        var provider;\n        return __generator(this, function (_a) {\n            provider = (config.provider);\n            if ((provider.blockNumber != null && provider.blockNumber >= blockNumber) || blockNumber === -1) {\n                return [2 /*return*/, provider];\n            }\n            return [2 /*return*/, (0, web_1.poll)(function () {\n                    return new Promise(function (resolve, reject) {\n                        setTimeout(function () {\n                            // We are synced\n                            if (provider.blockNumber >= blockNumber) {\n                                return resolve(provider);\n                            }\n                            // We're done; just quit\n                            if (config.cancelled) {\n                                return resolve(null);\n                            }\n                            // Try again, next block\n                            return resolve(undefined);\n                        }, 0);\n                    });\n                }, { oncePoll: provider })];\n        });\n    });\n}\nfunction getRunner(config, currentBlockNumber, method, params) {\n    return __awaiter(this, void 0, void 0, function () {\n        var provider, _a, filter;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    provider = config.provider;\n                    _a = method;\n                    switch (_a) {\n                        case \"getBlockNumber\": return [3 /*break*/, 1];\n                        case \"getGasPrice\": return [3 /*break*/, 1];\n                        case \"getEtherPrice\": return [3 /*break*/, 2];\n                        case \"getBalance\": return [3 /*break*/, 3];\n                        case \"getTransactionCount\": return [3 /*break*/, 3];\n                        case \"getCode\": return [3 /*break*/, 3];\n                        case \"getStorageAt\": return [3 /*break*/, 6];\n                        case \"getBlock\": return [3 /*break*/, 9];\n                        case \"call\": return [3 /*break*/, 12];\n                        case \"estimateGas\": return [3 /*break*/, 12];\n                        case \"getTransaction\": return [3 /*break*/, 15];\n                        case \"getTransactionReceipt\": return [3 /*break*/, 15];\n                        case \"getLogs\": return [3 /*break*/, 16];\n                    }\n                    return [3 /*break*/, 19];\n                case 1: return [2 /*return*/, provider[method]()];\n                case 2:\n                    if (provider.getEtherPrice) {\n                        return [2 /*return*/, provider.getEtherPrice()];\n                    }\n                    return [3 /*break*/, 19];\n                case 3:\n                    if (!(params.blockTag && (0, bytes_1.isHexString)(params.blockTag))) return [3 /*break*/, 5];\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\n                case 4:\n                    provider = _b.sent();\n                    _b.label = 5;\n                case 5: return [2 /*return*/, provider[method](params.address, params.blockTag || \"latest\")];\n                case 6:\n                    if (!(params.blockTag && (0, bytes_1.isHexString)(params.blockTag))) return [3 /*break*/, 8];\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\n                case 7:\n                    provider = _b.sent();\n                    _b.label = 8;\n                case 8: return [2 /*return*/, provider.getStorageAt(params.address, params.position, params.blockTag || \"latest\")];\n                case 9:\n                    if (!(params.blockTag && (0, bytes_1.isHexString)(params.blockTag))) return [3 /*break*/, 11];\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\n                case 10:\n                    provider = _b.sent();\n                    _b.label = 11;\n                case 11: return [2 /*return*/, provider[(params.includeTransactions ? \"getBlockWithTransactions\" : \"getBlock\")](params.blockTag || params.blockHash)];\n                case 12:\n                    if (!(params.blockTag && (0, bytes_1.isHexString)(params.blockTag))) return [3 /*break*/, 14];\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\n                case 13:\n                    provider = _b.sent();\n                    _b.label = 14;\n                case 14:\n                    if (method === \"call\" && params.blockTag) {\n                        return [2 /*return*/, provider[method](params.transaction, params.blockTag)];\n                    }\n                    return [2 /*return*/, provider[method](params.transaction)];\n                case 15: return [2 /*return*/, provider[method](params.transactionHash)];\n                case 16:\n                    filter = params.filter;\n                    if (!((filter.fromBlock && (0, bytes_1.isHexString)(filter.fromBlock)) || (filter.toBlock && (0, bytes_1.isHexString)(filter.toBlock)))) return [3 /*break*/, 18];\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\n                case 17:\n                    provider = _b.sent();\n                    _b.label = 18;\n                case 18: return [2 /*return*/, provider.getLogs(filter)];\n                case 19: return [2 /*return*/, logger.throwError(\"unknown method error\", logger_1.Logger.errors.UNKNOWN_ERROR, {\n                        method: method,\n                        params: params\n                    })];\n            }\n        });\n    });\n}\nvar FallbackProvider = /** @class */ (function (_super) {\n    __extends(FallbackProvider, _super);\n    function FallbackProvider(providers, quorum) {\n        var _this = this;\n        if (providers.length === 0) {\n            logger.throwArgumentError(\"missing providers\", \"providers\", providers);\n        }\n        var providerConfigs = providers.map(function (configOrProvider, index) {\n            if (abstract_provider_1.Provider.isProvider(configOrProvider)) {\n                var stallTimeout = (0, formatter_1.isCommunityResource)(configOrProvider) ? 2000 : 750;\n                var priority = 1;\n                return Object.freeze({ provider: configOrProvider, weight: 1, stallTimeout: stallTimeout, priority: priority });\n            }\n            var config = (0, properties_1.shallowCopy)(configOrProvider);\n            if (config.priority == null) {\n                config.priority = 1;\n            }\n            if (config.stallTimeout == null) {\n                config.stallTimeout = (0, formatter_1.isCommunityResource)(configOrProvider) ? 2000 : 750;\n            }\n            if (config.weight == null) {\n                config.weight = 1;\n            }\n            var weight = config.weight;\n            if (weight % 1 || weight > 512 || weight < 1) {\n                logger.throwArgumentError(\"invalid weight; must be integer in [1, 512]\", \"providers[\" + index + \"].weight\", weight);\n            }\n            return Object.freeze(config);\n        });\n        var total = providerConfigs.reduce(function (accum, c) { return (accum + c.weight); }, 0);\n        if (quorum == null) {\n            quorum = total / 2;\n        }\n        else if (quorum > total) {\n            logger.throwArgumentError(\"quorum will always fail; larger than total weight\", \"quorum\", quorum);\n        }\n        // Are all providers' networks are known\n        var networkOrReady = checkNetworks(providerConfigs.map(function (c) { return (c.provider).network; }));\n        // Not all networks are known; we must stall\n        if (networkOrReady == null) {\n            networkOrReady = new Promise(function (resolve, reject) {\n                setTimeout(function () {\n                    _this.detectNetwork().then(resolve, reject);\n                }, 0);\n            });\n        }\n        _this = _super.call(this, networkOrReady) || this;\n        // Preserve a copy, so we do not get mutated\n        (0, properties_1.defineReadOnly)(_this, \"providerConfigs\", Object.freeze(providerConfigs));\n        (0, properties_1.defineReadOnly)(_this, \"quorum\", quorum);\n        _this._highestBlockNumber = -1;\n        return _this;\n    }\n    FallbackProvider.prototype.detectNetwork = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var networks;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, Promise.all(this.providerConfigs.map(function (c) { return c.provider.getNetwork(); }))];\n                    case 1:\n                        networks = _a.sent();\n                        return [2 /*return*/, checkNetworks(networks)];\n                }\n            });\n        });\n    };\n    FallbackProvider.prototype.perform = function (method, params) {\n        return __awaiter(this, void 0, void 0, function () {\n            var results, i_1, result, processFunc, configs, currentBlockNumber, i, first, _loop_1, this_1, state_1;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(method === \"sendTransaction\")) return [3 /*break*/, 2];\n                        return [4 /*yield*/, Promise.all(this.providerConfigs.map(function (c) {\n                                return c.provider.sendTransaction(params.signedTransaction).then(function (result) {\n                                    return result.hash;\n                                }, function (error) {\n                                    return error;\n                                });\n                            }))];\n                    case 1:\n                        results = _a.sent();\n                        // Any success is good enough (other errors are likely \"already seen\" errors\n                        for (i_1 = 0; i_1 < results.length; i_1++) {\n                            result = results[i_1];\n                            if (typeof (result) === \"string\") {\n                                return [2 /*return*/, result];\n                            }\n                        }\n                        // They were all an error; pick the first error\n                        throw results[0];\n                    case 2:\n                        if (!(this._highestBlockNumber === -1 && method !== \"getBlockNumber\")) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.getBlockNumber()];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4:\n                        processFunc = getProcessFunc(this, method, params);\n                        configs = (0, random_1.shuffled)(this.providerConfigs.map(properties_1.shallowCopy));\n                        configs.sort(function (a, b) { return (a.priority - b.priority); });\n                        currentBlockNumber = this._highestBlockNumber;\n                        i = 0;\n                        first = true;\n                        _loop_1 = function () {\n                            var t0, inflightWeight, _loop_2, waiting, results, result, errors;\n                            return __generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        t0 = now();\n                                        inflightWeight = configs.filter(function (c) { return (c.runner && ((t0 - c.start) < c.stallTimeout)); })\n                                            .reduce(function (accum, c) { return (accum + c.weight); }, 0);\n                                        _loop_2 = function () {\n                                            var config = configs[i++];\n                                            var rid = nextRid++;\n                                            config.start = now();\n                                            config.staller = stall(config.stallTimeout);\n                                            config.staller.wait(function () { config.staller = null; });\n                                            config.runner = getRunner(config, currentBlockNumber, method, params).then(function (result) {\n                                                config.done = true;\n                                                config.result = result;\n                                                if (_this.listenerCount(\"debug\")) {\n                                                    _this.emit(\"debug\", {\n                                                        action: \"request\",\n                                                        rid: rid,\n                                                        backend: exposeDebugConfig(config, now()),\n                                                        request: { method: method, params: (0, properties_1.deepCopy)(params) },\n                                                        provider: _this\n                                                    });\n                                                }\n                                            }, function (error) {\n                                                config.done = true;\n                                                config.error = error;\n                                                if (_this.listenerCount(\"debug\")) {\n                                                    _this.emit(\"debug\", {\n                                                        action: \"request\",\n                                                        rid: rid,\n                                                        backend: exposeDebugConfig(config, now()),\n                                                        request: { method: method, params: (0, properties_1.deepCopy)(params) },\n                                                        provider: _this\n                                                    });\n                                                }\n                                            });\n                                            if (this_1.listenerCount(\"debug\")) {\n                                                this_1.emit(\"debug\", {\n                                                    action: \"request\",\n                                                    rid: rid,\n                                                    backend: exposeDebugConfig(config, null),\n                                                    request: { method: method, params: (0, properties_1.deepCopy)(params) },\n                                                    provider: this_1\n                                                });\n                                            }\n                                            inflightWeight += config.weight;\n                                        };\n                                        // Start running enough to meet quorum\n                                        while (inflightWeight < this_1.quorum && i < configs.length) {\n                                            _loop_2();\n                                        }\n                                        waiting = [];\n                                        configs.forEach(function (c) {\n                                            if (c.done || !c.runner) {\n                                                return;\n                                            }\n                                            waiting.push(c.runner);\n                                            if (c.staller) {\n                                                waiting.push(c.staller.getPromise());\n                                            }\n                                        });\n                                        if (!waiting.length) return [3 /*break*/, 2];\n                                        return [4 /*yield*/, Promise.race(waiting)];\n                                    case 1:\n                                        _b.sent();\n                                        _b.label = 2;\n                                    case 2:\n                                        results = configs.filter(function (c) { return (c.done && c.error == null); });\n                                        if (!(results.length >= this_1.quorum)) return [3 /*break*/, 5];\n                                        result = processFunc(results);\n                                        if (result !== undefined) {\n                                            // Shut down any stallers\n                                            configs.forEach(function (c) {\n                                                if (c.staller) {\n                                                    c.staller.cancel();\n                                                }\n                                                c.cancelled = true;\n                                            });\n                                            return [2 /*return*/, { value: result }];\n                                        }\n                                        if (!!first) return [3 /*break*/, 4];\n                                        return [4 /*yield*/, stall(100).getPromise()];\n                                    case 3:\n                                        _b.sent();\n                                        _b.label = 4;\n                                    case 4:\n                                        first = false;\n                                        _b.label = 5;\n                                    case 5:\n                                        errors = configs.reduce(function (accum, c) {\n                                            if (!c.done || c.error == null) {\n                                                return accum;\n                                            }\n                                            var code = (c.error).code;\n                                            if (ForwardErrors.indexOf(code) >= 0) {\n                                                if (!accum[code]) {\n                                                    accum[code] = { error: c.error, weight: 0 };\n                                                }\n                                                accum[code].weight += c.weight;\n                                            }\n                                            return accum;\n                                        }, ({}));\n                                        Object.keys(errors).forEach(function (errorCode) {\n                                            var tally = errors[errorCode];\n                                            if (tally.weight < _this.quorum) {\n                                                return;\n                                            }\n                                            // Shut down any stallers\n                                            configs.forEach(function (c) {\n                                                if (c.staller) {\n                                                    c.staller.cancel();\n                                                }\n                                                c.cancelled = true;\n                                            });\n                                            var e = (tally.error);\n                                            var props = {};\n                                            ForwardProperties.forEach(function (name) {\n                                                if (e[name] == null) {\n                                                    return;\n                                                }\n                                                props[name] = e[name];\n                                            });\n                                            logger.throwError(e.reason || e.message, errorCode, props);\n                                        });\n                                        // All configs have run to completion; we will never get more data\n                                        if (configs.filter(function (c) { return !c.done; }).length === 0) {\n                                            return [2 /*return*/, \"break\"];\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        };\n                        this_1 = this;\n                        _a.label = 5;\n                    case 5:\n                        if (!true) return [3 /*break*/, 7];\n                        return [5 /*yield**/, _loop_1()];\n                    case 6:\n                        state_1 = _a.sent();\n                        if (typeof state_1 === \"object\")\n                            return [2 /*return*/, state_1.value];\n                        if (state_1 === \"break\")\n                            return [3 /*break*/, 7];\n                        return [3 /*break*/, 5];\n                    case 7:\n                        // Shut down any stallers; shouldn't be any\n                        configs.forEach(function (c) {\n                            if (c.staller) {\n                                c.staller.cancel();\n                            }\n                            c.cancelled = true;\n                        });\n                        return [2 /*return*/, logger.throwError(\"failed to meet quorum\", logger_1.Logger.errors.SERVER_ERROR, {\n                                method: method,\n                                params: params,\n                                //results: configs.map((c) => c.result),\n                                //errors: configs.map((c) => c.error),\n                                results: configs.map(function (c) { return exposeDebugConfig(c); }),\n                                provider: this\n                            })];\n                }\n            });\n        });\n    };\n    return FallbackProvider;\n}(base_provider_1.BaseProvider));\nexports.FallbackProvider = FallbackProvider;\n//# sourceMappingURL=fallback-provider.js.map\n};","~:removed-requires",["~#set",[]],"~:actual-requires",["^5",["~$module$node_modules$$ethersproject$providers$lib$base_provider","~$shadow.js","~$module$node_modules$$ethersproject$bytes$lib$index","~$module$node_modules$$ethersproject$providers$lib$_version","~$module$node_modules$$ethersproject$bignumber$lib$index","~$module$node_modules$$ethersproject$random$lib$index","~$module$node_modules$$ethersproject$abstract_provider$lib$index","~$module$node_modules$$ethersproject$web$lib$index","~$module$node_modules$$ethersproject$logger$lib$index","~$module$node_modules$$ethersproject$properties$lib$index","~$module$node_modules$$ethersproject$providers$lib$formatter"]],"~:properties",["^5",["sent","priority","next","confirmations","cancel","params","staller","prototype","label","ops","method","__esModule","error","results","rid","count","provider","backend","value","cancelled","wait","runner","stallTimeout","start","request","action","trys","duration","perform","__proto__","transactions","oncePoll","_highestBlockNumber","detectNetwork","get","done","getPromise","weight","result","constructor","FallbackProvider"]],"~:compiled-at",1695041440922,"~:source-map-json","{\n\"version\":3,\n\"file\":\"module$node_modules$$ethersproject$providers$lib$fallback_provider.js\",\n\"lineCount\":23,\n\"mappings\":\"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\",\n\"sources\":[\"node_modules/@ethersproject/providers/lib/fallback-provider.js\"],\n\"sourcesContent\":[\"shadow$provide[345] = function(global,require,module,exports) {\\n\\\"use strict\\\";\\nvar __extends = (this && this.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.FallbackProvider = void 0;\\nvar abstract_provider_1 = require(\\\"@ethersproject/abstract-provider\\\");\\nvar bignumber_1 = require(\\\"@ethersproject/bignumber\\\");\\nvar bytes_1 = require(\\\"@ethersproject/bytes\\\");\\nvar properties_1 = require(\\\"@ethersproject/properties\\\");\\nvar random_1 = require(\\\"@ethersproject/random\\\");\\nvar web_1 = require(\\\"@ethersproject/web\\\");\\nvar base_provider_1 = require(\\\"./base-provider\\\");\\nvar formatter_1 = require(\\\"./formatter\\\");\\nvar logger_1 = require(\\\"@ethersproject/logger\\\");\\nvar _version_1 = require(\\\"./_version\\\");\\nvar logger = new logger_1.Logger(_version_1.version);\\nfunction now() { return (new Date()).getTime(); }\\n// Returns to network as long as all agree, or null if any is null.\\n// Throws an error if any two networks do not match.\\nfunction checkNetworks(networks) {\\n    var result = null;\\n    for (var i = 0; i < networks.length; i++) {\\n        var network = networks[i];\\n        // Null! We do not know our network; bail.\\n        if (network == null) {\\n            return null;\\n        }\\n        if (result) {\\n            // Make sure the network matches the previous networks\\n            if (!(result.name === network.name && result.chainId === network.chainId &&\\n                ((result.ensAddress === network.ensAddress) || (result.ensAddress == null && network.ensAddress == null)))) {\\n                logger.throwArgumentError(\\\"provider mismatch\\\", \\\"networks\\\", networks);\\n            }\\n        }\\n        else {\\n            result = network;\\n        }\\n    }\\n    return result;\\n}\\nfunction median(values, maxDelta) {\\n    values = values.slice().sort();\\n    var middle = Math.floor(values.length / 2);\\n    // Odd length; take the middle\\n    if (values.length % 2) {\\n        return values[middle];\\n    }\\n    // Even length; take the average of the two middle\\n    var a = values[middle - 1], b = values[middle];\\n    if (maxDelta != null && Math.abs(a - b) > maxDelta) {\\n        return null;\\n    }\\n    return (a + b) / 2;\\n}\\nfunction serialize(value) {\\n    if (value === null) {\\n        return \\\"null\\\";\\n    }\\n    else if (typeof (value) === \\\"number\\\" || typeof (value) === \\\"boolean\\\") {\\n        return JSON.stringify(value);\\n    }\\n    else if (typeof (value) === \\\"string\\\") {\\n        return value;\\n    }\\n    else if (bignumber_1.BigNumber.isBigNumber(value)) {\\n        return value.toString();\\n    }\\n    else if (Array.isArray(value)) {\\n        return JSON.stringify(value.map(function (i) { return serialize(i); }));\\n    }\\n    else if (typeof (value) === \\\"object\\\") {\\n        var keys = Object.keys(value);\\n        keys.sort();\\n        return \\\"{\\\" + keys.map(function (key) {\\n            var v = value[key];\\n            if (typeof (v) === \\\"function\\\") {\\n                v = \\\"[function]\\\";\\n            }\\n            else {\\n                v = serialize(v);\\n            }\\n            return JSON.stringify(key) + \\\":\\\" + v;\\n        }).join(\\\",\\\") + \\\"}\\\";\\n    }\\n    throw new Error(\\\"unknown value type: \\\" + typeof (value));\\n}\\n// Next request ID to use for emitting debug info\\nvar nextRid = 1;\\n;\\nfunction stall(duration) {\\n    var cancel = null;\\n    var timer = null;\\n    var promise = (new Promise(function (resolve) {\\n        cancel = function () {\\n            if (timer) {\\n                clearTimeout(timer);\\n                timer = null;\\n            }\\n            resolve();\\n        };\\n        timer = setTimeout(cancel, duration);\\n    }));\\n    var wait = function (func) {\\n        promise = promise.then(func);\\n        return promise;\\n    };\\n    function getPromise() {\\n        return promise;\\n    }\\n    return { cancel: cancel, getPromise: getPromise, wait: wait };\\n}\\nvar ForwardErrors = [\\n    logger_1.Logger.errors.CALL_EXCEPTION,\\n    logger_1.Logger.errors.INSUFFICIENT_FUNDS,\\n    logger_1.Logger.errors.NONCE_EXPIRED,\\n    logger_1.Logger.errors.REPLACEMENT_UNDERPRICED,\\n    logger_1.Logger.errors.UNPREDICTABLE_GAS_LIMIT\\n];\\nvar ForwardProperties = [\\n    \\\"address\\\",\\n    \\\"args\\\",\\n    \\\"errorArgs\\\",\\n    \\\"errorSignature\\\",\\n    \\\"method\\\",\\n    \\\"transaction\\\",\\n];\\n;\\nfunction exposeDebugConfig(config, now) {\\n    var result = {\\n        weight: config.weight\\n    };\\n    Object.defineProperty(result, \\\"provider\\\", { get: function () { return config.provider; } });\\n    if (config.start) {\\n        result.start = config.start;\\n    }\\n    if (now) {\\n        result.duration = (now - config.start);\\n    }\\n    if (config.done) {\\n        if (config.error) {\\n            result.error = config.error;\\n        }\\n        else {\\n            result.result = config.result || null;\\n        }\\n    }\\n    return result;\\n}\\nfunction normalizedTally(normalize, quorum) {\\n    return function (configs) {\\n        // Count the votes for each result\\n        var tally = {};\\n        configs.forEach(function (c) {\\n            var value = normalize(c.result);\\n            if (!tally[value]) {\\n                tally[value] = { count: 0, result: c.result };\\n            }\\n            tally[value].count++;\\n        });\\n        // Check for a quorum on any given result\\n        var keys = Object.keys(tally);\\n        for (var i = 0; i < keys.length; i++) {\\n            var check = tally[keys[i]];\\n            if (check.count >= quorum) {\\n                return check.result;\\n            }\\n        }\\n        // No quroum\\n        return undefined;\\n    };\\n}\\nfunction getProcessFunc(provider, method, params) {\\n    var normalize = serialize;\\n    switch (method) {\\n        case \\\"getBlockNumber\\\":\\n            // Return the median value, unless there is (median + 1) is also\\n            // present, in which case that is probably true and the median\\n            // is going to be stale soon. In the event of a malicious node,\\n            // the lie will be true soon enough.\\n            return function (configs) {\\n                var values = configs.map(function (c) { return c.result; });\\n                // Get the median block number\\n                var blockNumber = median(configs.map(function (c) { return c.result; }), 2);\\n                if (blockNumber == null) {\\n                    return undefined;\\n                }\\n                blockNumber = Math.ceil(blockNumber);\\n                // If the next block height is present, its prolly safe to use\\n                if (values.indexOf(blockNumber + 1) >= 0) {\\n                    blockNumber++;\\n                }\\n                // Don't ever roll back the blockNumber\\n                if (blockNumber >= provider._highestBlockNumber) {\\n                    provider._highestBlockNumber = blockNumber;\\n                }\\n                return provider._highestBlockNumber;\\n            };\\n        case \\\"getGasPrice\\\":\\n            // Return the middle (round index up) value, similar to median\\n            // but do not average even entries and choose the higher.\\n            // Malicious actors must compromise 50% of the nodes to lie.\\n            return function (configs) {\\n                var values = configs.map(function (c) { return c.result; });\\n                values.sort();\\n                return values[Math.floor(values.length / 2)];\\n            };\\n        case \\\"getEtherPrice\\\":\\n            // Returns the median price. Malicious actors must compromise at\\n            // least 50% of the nodes to lie (in a meaningful way).\\n            return function (configs) {\\n                return median(configs.map(function (c) { return c.result; }));\\n            };\\n        // No additional normalizing required; serialize is enough\\n        case \\\"getBalance\\\":\\n        case \\\"getTransactionCount\\\":\\n        case \\\"getCode\\\":\\n        case \\\"getStorageAt\\\":\\n        case \\\"call\\\":\\n        case \\\"estimateGas\\\":\\n        case \\\"getLogs\\\":\\n            break;\\n        // We drop the confirmations from transactions as it is approximate\\n        case \\\"getTransaction\\\":\\n        case \\\"getTransactionReceipt\\\":\\n            normalize = function (tx) {\\n                if (tx == null) {\\n                    return null;\\n                }\\n                tx = (0, properties_1.shallowCopy)(tx);\\n                tx.confirmations = -1;\\n                return serialize(tx);\\n            };\\n            break;\\n        // We drop the confirmations from transactions as it is approximate\\n        case \\\"getBlock\\\":\\n            // We drop the confirmations from transactions as it is approximate\\n            if (params.includeTransactions) {\\n                normalize = function (block) {\\n                    if (block == null) {\\n                        return null;\\n                    }\\n                    block = (0, properties_1.shallowCopy)(block);\\n                    block.transactions = block.transactions.map(function (tx) {\\n                        tx = (0, properties_1.shallowCopy)(tx);\\n                        tx.confirmations = -1;\\n                        return tx;\\n                    });\\n                    return serialize(block);\\n                };\\n            }\\n            else {\\n                normalize = function (block) {\\n                    if (block == null) {\\n                        return null;\\n                    }\\n                    return serialize(block);\\n                };\\n            }\\n            break;\\n        default:\\n            throw new Error(\\\"unknown method: \\\" + method);\\n    }\\n    // Return the result if and only if the expected quorum is\\n    // satisfied and agreed upon for the final result.\\n    return normalizedTally(normalize, provider.quorum);\\n}\\n// If we are doing a blockTag query, we need to make sure the backend is\\n// caught up to the FallbackProvider, before sending a request to it.\\nfunction waitForSync(config, blockNumber) {\\n    return __awaiter(this, void 0, void 0, function () {\\n        var provider;\\n        return __generator(this, function (_a) {\\n            provider = (config.provider);\\n            if ((provider.blockNumber != null && provider.blockNumber >= blockNumber) || blockNumber === -1) {\\n                return [2 /*return*/, provider];\\n            }\\n            return [2 /*return*/, (0, web_1.poll)(function () {\\n                    return new Promise(function (resolve, reject) {\\n                        setTimeout(function () {\\n                            // We are synced\\n                            if (provider.blockNumber >= blockNumber) {\\n                                return resolve(provider);\\n                            }\\n                            // We're done; just quit\\n                            if (config.cancelled) {\\n                                return resolve(null);\\n                            }\\n                            // Try again, next block\\n                            return resolve(undefined);\\n                        }, 0);\\n                    });\\n                }, { oncePoll: provider })];\\n        });\\n    });\\n}\\nfunction getRunner(config, currentBlockNumber, method, params) {\\n    return __awaiter(this, void 0, void 0, function () {\\n        var provider, _a, filter;\\n        return __generator(this, function (_b) {\\n            switch (_b.label) {\\n                case 0:\\n                    provider = config.provider;\\n                    _a = method;\\n                    switch (_a) {\\n                        case \\\"getBlockNumber\\\": return [3 /*break*/, 1];\\n                        case \\\"getGasPrice\\\": return [3 /*break*/, 1];\\n                        case \\\"getEtherPrice\\\": return [3 /*break*/, 2];\\n                        case \\\"getBalance\\\": return [3 /*break*/, 3];\\n                        case \\\"getTransactionCount\\\": return [3 /*break*/, 3];\\n                        case \\\"getCode\\\": return [3 /*break*/, 3];\\n                        case \\\"getStorageAt\\\": return [3 /*break*/, 6];\\n                        case \\\"getBlock\\\": return [3 /*break*/, 9];\\n                        case \\\"call\\\": return [3 /*break*/, 12];\\n                        case \\\"estimateGas\\\": return [3 /*break*/, 12];\\n                        case \\\"getTransaction\\\": return [3 /*break*/, 15];\\n                        case \\\"getTransactionReceipt\\\": return [3 /*break*/, 15];\\n                        case \\\"getLogs\\\": return [3 /*break*/, 16];\\n                    }\\n                    return [3 /*break*/, 19];\\n                case 1: return [2 /*return*/, provider[method]()];\\n                case 2:\\n                    if (provider.getEtherPrice) {\\n                        return [2 /*return*/, provider.getEtherPrice()];\\n                    }\\n                    return [3 /*break*/, 19];\\n                case 3:\\n                    if (!(params.blockTag && (0, bytes_1.isHexString)(params.blockTag))) return [3 /*break*/, 5];\\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\\n                case 4:\\n                    provider = _b.sent();\\n                    _b.label = 5;\\n                case 5: return [2 /*return*/, provider[method](params.address, params.blockTag || \\\"latest\\\")];\\n                case 6:\\n                    if (!(params.blockTag && (0, bytes_1.isHexString)(params.blockTag))) return [3 /*break*/, 8];\\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\\n                case 7:\\n                    provider = _b.sent();\\n                    _b.label = 8;\\n                case 8: return [2 /*return*/, provider.getStorageAt(params.address, params.position, params.blockTag || \\\"latest\\\")];\\n                case 9:\\n                    if (!(params.blockTag && (0, bytes_1.isHexString)(params.blockTag))) return [3 /*break*/, 11];\\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\\n                case 10:\\n                    provider = _b.sent();\\n                    _b.label = 11;\\n                case 11: return [2 /*return*/, provider[(params.includeTransactions ? \\\"getBlockWithTransactions\\\" : \\\"getBlock\\\")](params.blockTag || params.blockHash)];\\n                case 12:\\n                    if (!(params.blockTag && (0, bytes_1.isHexString)(params.blockTag))) return [3 /*break*/, 14];\\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\\n                case 13:\\n                    provider = _b.sent();\\n                    _b.label = 14;\\n                case 14:\\n                    if (method === \\\"call\\\" && params.blockTag) {\\n                        return [2 /*return*/, provider[method](params.transaction, params.blockTag)];\\n                    }\\n                    return [2 /*return*/, provider[method](params.transaction)];\\n                case 15: return [2 /*return*/, provider[method](params.transactionHash)];\\n                case 16:\\n                    filter = params.filter;\\n                    if (!((filter.fromBlock && (0, bytes_1.isHexString)(filter.fromBlock)) || (filter.toBlock && (0, bytes_1.isHexString)(filter.toBlock)))) return [3 /*break*/, 18];\\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\\n                case 17:\\n                    provider = _b.sent();\\n                    _b.label = 18;\\n                case 18: return [2 /*return*/, provider.getLogs(filter)];\\n                case 19: return [2 /*return*/, logger.throwError(\\\"unknown method error\\\", logger_1.Logger.errors.UNKNOWN_ERROR, {\\n                        method: method,\\n                        params: params\\n                    })];\\n            }\\n        });\\n    });\\n}\\nvar FallbackProvider = /** @class */ (function (_super) {\\n    __extends(FallbackProvider, _super);\\n    function FallbackProvider(providers, quorum) {\\n        var _this = this;\\n        if (providers.length === 0) {\\n            logger.throwArgumentError(\\\"missing providers\\\", \\\"providers\\\", providers);\\n        }\\n        var providerConfigs = providers.map(function (configOrProvider, index) {\\n            if (abstract_provider_1.Provider.isProvider(configOrProvider)) {\\n                var stallTimeout = (0, formatter_1.isCommunityResource)(configOrProvider) ? 2000 : 750;\\n                var priority = 1;\\n                return Object.freeze({ provider: configOrProvider, weight: 1, stallTimeout: stallTimeout, priority: priority });\\n            }\\n            var config = (0, properties_1.shallowCopy)(configOrProvider);\\n            if (config.priority == null) {\\n                config.priority = 1;\\n            }\\n            if (config.stallTimeout == null) {\\n                config.stallTimeout = (0, formatter_1.isCommunityResource)(configOrProvider) ? 2000 : 750;\\n            }\\n            if (config.weight == null) {\\n                config.weight = 1;\\n            }\\n            var weight = config.weight;\\n            if (weight % 1 || weight > 512 || weight < 1) {\\n                logger.throwArgumentError(\\\"invalid weight; must be integer in [1, 512]\\\", \\\"providers[\\\" + index + \\\"].weight\\\", weight);\\n            }\\n            return Object.freeze(config);\\n        });\\n        var total = providerConfigs.reduce(function (accum, c) { return (accum + c.weight); }, 0);\\n        if (quorum == null) {\\n            quorum = total / 2;\\n        }\\n        else if (quorum > total) {\\n            logger.throwArgumentError(\\\"quorum will always fail; larger than total weight\\\", \\\"quorum\\\", quorum);\\n        }\\n        // Are all providers' networks are known\\n        var networkOrReady = checkNetworks(providerConfigs.map(function (c) { return (c.provider).network; }));\\n        // Not all networks are known; we must stall\\n        if (networkOrReady == null) {\\n            networkOrReady = new Promise(function (resolve, reject) {\\n                setTimeout(function () {\\n                    _this.detectNetwork().then(resolve, reject);\\n                }, 0);\\n            });\\n        }\\n        _this = _super.call(this, networkOrReady) || this;\\n        // Preserve a copy, so we do not get mutated\\n        (0, properties_1.defineReadOnly)(_this, \\\"providerConfigs\\\", Object.freeze(providerConfigs));\\n        (0, properties_1.defineReadOnly)(_this, \\\"quorum\\\", quorum);\\n        _this._highestBlockNumber = -1;\\n        return _this;\\n    }\\n    FallbackProvider.prototype.detectNetwork = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var networks;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, Promise.all(this.providerConfigs.map(function (c) { return c.provider.getNetwork(); }))];\\n                    case 1:\\n                        networks = _a.sent();\\n                        return [2 /*return*/, checkNetworks(networks)];\\n                }\\n            });\\n        });\\n    };\\n    FallbackProvider.prototype.perform = function (method, params) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var results, i_1, result, processFunc, configs, currentBlockNumber, i, first, _loop_1, this_1, state_1;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        if (!(method === \\\"sendTransaction\\\")) return [3 /*break*/, 2];\\n                        return [4 /*yield*/, Promise.all(this.providerConfigs.map(function (c) {\\n                                return c.provider.sendTransaction(params.signedTransaction).then(function (result) {\\n                                    return result.hash;\\n                                }, function (error) {\\n                                    return error;\\n                                });\\n                            }))];\\n                    case 1:\\n                        results = _a.sent();\\n                        // Any success is good enough (other errors are likely \\\"already seen\\\" errors\\n                        for (i_1 = 0; i_1 < results.length; i_1++) {\\n                            result = results[i_1];\\n                            if (typeof (result) === \\\"string\\\") {\\n                                return [2 /*return*/, result];\\n                            }\\n                        }\\n                        // They were all an error; pick the first error\\n                        throw results[0];\\n                    case 2:\\n                        if (!(this._highestBlockNumber === -1 && method !== \\\"getBlockNumber\\\")) return [3 /*break*/, 4];\\n                        return [4 /*yield*/, this.getBlockNumber()];\\n                    case 3:\\n                        _a.sent();\\n                        _a.label = 4;\\n                    case 4:\\n                        processFunc = getProcessFunc(this, method, params);\\n                        configs = (0, random_1.shuffled)(this.providerConfigs.map(properties_1.shallowCopy));\\n                        configs.sort(function (a, b) { return (a.priority - b.priority); });\\n                        currentBlockNumber = this._highestBlockNumber;\\n                        i = 0;\\n                        first = true;\\n                        _loop_1 = function () {\\n                            var t0, inflightWeight, _loop_2, waiting, results, result, errors;\\n                            return __generator(this, function (_b) {\\n                                switch (_b.label) {\\n                                    case 0:\\n                                        t0 = now();\\n                                        inflightWeight = configs.filter(function (c) { return (c.runner && ((t0 - c.start) < c.stallTimeout)); })\\n                                            .reduce(function (accum, c) { return (accum + c.weight); }, 0);\\n                                        _loop_2 = function () {\\n                                            var config = configs[i++];\\n                                            var rid = nextRid++;\\n                                            config.start = now();\\n                                            config.staller = stall(config.stallTimeout);\\n                                            config.staller.wait(function () { config.staller = null; });\\n                                            config.runner = getRunner(config, currentBlockNumber, method, params).then(function (result) {\\n                                                config.done = true;\\n                                                config.result = result;\\n                                                if (_this.listenerCount(\\\"debug\\\")) {\\n                                                    _this.emit(\\\"debug\\\", {\\n                                                        action: \\\"request\\\",\\n                                                        rid: rid,\\n                                                        backend: exposeDebugConfig(config, now()),\\n                                                        request: { method: method, params: (0, properties_1.deepCopy)(params) },\\n                                                        provider: _this\\n                                                    });\\n                                                }\\n                                            }, function (error) {\\n                                                config.done = true;\\n                                                config.error = error;\\n                                                if (_this.listenerCount(\\\"debug\\\")) {\\n                                                    _this.emit(\\\"debug\\\", {\\n                                                        action: \\\"request\\\",\\n                                                        rid: rid,\\n                                                        backend: exposeDebugConfig(config, now()),\\n                                                        request: { method: method, params: (0, properties_1.deepCopy)(params) },\\n                                                        provider: _this\\n                                                    });\\n                                                }\\n                                            });\\n                                            if (this_1.listenerCount(\\\"debug\\\")) {\\n                                                this_1.emit(\\\"debug\\\", {\\n                                                    action: \\\"request\\\",\\n                                                    rid: rid,\\n                                                    backend: exposeDebugConfig(config, null),\\n                                                    request: { method: method, params: (0, properties_1.deepCopy)(params) },\\n                                                    provider: this_1\\n                                                });\\n                                            }\\n                                            inflightWeight += config.weight;\\n                                        };\\n                                        // Start running enough to meet quorum\\n                                        while (inflightWeight < this_1.quorum && i < configs.length) {\\n                                            _loop_2();\\n                                        }\\n                                        waiting = [];\\n                                        configs.forEach(function (c) {\\n                                            if (c.done || !c.runner) {\\n                                                return;\\n                                            }\\n                                            waiting.push(c.runner);\\n                                            if (c.staller) {\\n                                                waiting.push(c.staller.getPromise());\\n                                            }\\n                                        });\\n                                        if (!waiting.length) return [3 /*break*/, 2];\\n                                        return [4 /*yield*/, Promise.race(waiting)];\\n                                    case 1:\\n                                        _b.sent();\\n                                        _b.label = 2;\\n                                    case 2:\\n                                        results = configs.filter(function (c) { return (c.done && c.error == null); });\\n                                        if (!(results.length >= this_1.quorum)) return [3 /*break*/, 5];\\n                                        result = processFunc(results);\\n                                        if (result !== undefined) {\\n                                            // Shut down any stallers\\n                                            configs.forEach(function (c) {\\n                                                if (c.staller) {\\n                                                    c.staller.cancel();\\n                                                }\\n                                                c.cancelled = true;\\n                                            });\\n                                            return [2 /*return*/, { value: result }];\\n                                        }\\n                                        if (!!first) return [3 /*break*/, 4];\\n                                        return [4 /*yield*/, stall(100).getPromise()];\\n                                    case 3:\\n                                        _b.sent();\\n                                        _b.label = 4;\\n                                    case 4:\\n                                        first = false;\\n                                        _b.label = 5;\\n                                    case 5:\\n                                        errors = configs.reduce(function (accum, c) {\\n                                            if (!c.done || c.error == null) {\\n                                                return accum;\\n                                            }\\n                                            var code = (c.error).code;\\n                                            if (ForwardErrors.indexOf(code) >= 0) {\\n                                                if (!accum[code]) {\\n                                                    accum[code] = { error: c.error, weight: 0 };\\n                                                }\\n                                                accum[code].weight += c.weight;\\n                                            }\\n                                            return accum;\\n                                        }, ({}));\\n                                        Object.keys(errors).forEach(function (errorCode) {\\n                                            var tally = errors[errorCode];\\n                                            if (tally.weight < _this.quorum) {\\n                                                return;\\n                                            }\\n                                            // Shut down any stallers\\n                                            configs.forEach(function (c) {\\n                                                if (c.staller) {\\n                                                    c.staller.cancel();\\n                                                }\\n                                                c.cancelled = true;\\n                                            });\\n                                            var e = (tally.error);\\n                                            var props = {};\\n                                            ForwardProperties.forEach(function (name) {\\n                                                if (e[name] == null) {\\n                                                    return;\\n                                                }\\n                                                props[name] = e[name];\\n                                            });\\n                                            logger.throwError(e.reason || e.message, errorCode, props);\\n                                        });\\n                                        // All configs have run to completion; we will never get more data\\n                                        if (configs.filter(function (c) { return !c.done; }).length === 0) {\\n                                            return [2 /*return*/, \\\"break\\\"];\\n                                        }\\n                                        return [2 /*return*/];\\n                                }\\n                            });\\n                        };\\n                        this_1 = this;\\n                        _a.label = 5;\\n                    case 5:\\n                        if (!true) return [3 /*break*/, 7];\\n                        return [5 /*yield**/, _loop_1()];\\n                    case 6:\\n                        state_1 = _a.sent();\\n                        if (typeof state_1 === \\\"object\\\")\\n                            return [2 /*return*/, state_1.value];\\n                        if (state_1 === \\\"break\\\")\\n                            return [3 /*break*/, 7];\\n                        return [3 /*break*/, 5];\\n                    case 7:\\n                        // Shut down any stallers; shouldn't be any\\n                        configs.forEach(function (c) {\\n                            if (c.staller) {\\n                                c.staller.cancel();\\n                            }\\n                            c.cancelled = true;\\n                        });\\n                        return [2 /*return*/, logger.throwError(\\\"failed to meet quorum\\\", logger_1.Logger.errors.SERVER_ERROR, {\\n                                method: method,\\n                                params: params,\\n                                //results: configs.map((c) => c.result),\\n                                //errors: configs.map((c) => c.error),\\n                                results: configs.map(function (c) { return exposeDebugConfig(c); }),\\n                                provider: this\\n                            })];\\n                }\\n            });\\n        });\\n    };\\n    return FallbackProvider;\\n}(base_provider_1.BaseProvider));\\nexports.FallbackProvider = FallbackProvider;\\n//# sourceMappingURL=fallback-provider.js.map\\n};\"],\n\"names\":[\"shadow$provide\",\"global\",\"require\",\"module\",\"exports\",\"checkNetworks\",\"networks\",\"result\",\"i\",\"length\",\"network\",\"name\",\"chainId\",\"ensAddress\",\"logger\",\"throwArgumentError\",\"median\",\"values\",\"maxDelta\",\"slice\",\"sort\",\"middle\",\"Math\",\"floor\",\"a\",\"b\",\"abs\",\"serialize\",\"value\",\"JSON\",\"stringify\",\"bignumber_1\",\"BigNumber\",\"isBigNumber\",\"toString\",\"Array\",\"isArray\",\"map\",\"keys\",\"Object\",\"key\",\"v\",\"join\",\"Error\",\"stall\",\"duration\",\"cancel\",\"timer\",\"promise\",\"Promise\",\"resolve\",\"clearTimeout\",\"setTimeout\",\"getPromise\",\"wait\",\"func\",\"then\",\"exposeDebugConfig\",\"config\",\"now\",\"weight\",\"defineProperty\",\"get\",\"provider\",\"start\",\"done\",\"error\",\"normalizedTally\",\"normalize\",\"quorum\",\"configs\",\"tally\",\"forEach\",\"c\",\"count\",\"check\",\"getProcessFunc\",\"method\",\"params\",\"blockNumber\",\"_highestBlockNumber\",\"ceil\",\"indexOf\",\"tx\",\"properties_1\",\"shallowCopy\",\"confirmations\",\"includeTransactions\",\"block\",\"transactions\",\"waitForSync\",\"__awaiter\",\"__generator\",\"_a\",\"web_1\",\"poll\",\"reject\",\"cancelled\",\"undefined\",\"oncePoll\",\"getRunner\",\"currentBlockNumber\",\"filter\",\"_b\",\"label\",\"getEtherPrice\",\"blockTag\",\"bytes_1\",\"isHexString\",\"sent\",\"address\",\"getStorageAt\",\"position\",\"blockHash\",\"transaction\",\"transactionHash\",\"fromBlock\",\"toBlock\",\"getLogs\",\"throwError\",\"logger_1\",\"Logger\",\"errors\",\"UNKNOWN_ERROR\",\"__extends\",\"extendStatics\",\"d\",\"setPrototypeOf\",\"__proto__\",\"p\",\"prototype\",\"hasOwnProperty\",\"call\",\"__\",\"constructor\",\"TypeError\",\"String\",\"create\",\"thisArg\",\"_arguments\",\"P\",\"generator\",\"adopt\",\"fulfilled\",\"step\",\"next\",\"e\",\"rejected\",\"apply\",\"body\",\"verb\",\"n\",\"op\",\"f\",\"_\",\"y\",\"t\",\"ops\",\"pop\",\"trys\",\"push\",\"g\",\"Symbol\",\"iterator\",\"FallbackProvider\",\"abstract_provider_1\",\"random_1\",\"base_provider_1\",\"formatter_1\",\"_version_1\",\"version\",\"nextRid\",\"ForwardErrors\",\"CALL_EXCEPTION\",\"INSUFFICIENT_FUNDS\",\"NONCE_EXPIRED\",\"REPLACEMENT_UNDERPRICED\",\"UNPREDICTABLE_GAS_LIMIT\",\"ForwardProperties\",\"_super\",\"providers\",\"_this\",\"providerConfigs\",\"configOrProvider\",\"index\",\"Provider\",\"isProvider\",\"stallTimeout\",\"isCommunityResource\",\"freeze\",\"priority\",\"total\",\"reduce\",\"accum\",\"networkOrReady\",\"detectNetwork\",\"defineReadOnly\",\"FallbackProvider.prototype.detectNetwork\",\"all\",\"getNetwork\",\"perform\",\"FallbackProvider.prototype.perform\",\"results\",\"i_1\",\"processFunc\",\"first\",\"_loop_1\",\"this_1\",\"state_1\",\"sendTransaction\",\"signedTransaction\",\"hash\",\"getBlockNumber\",\"shuffled\",\"t0\",\"inflightWeight\",\"_loop_2\",\"waiting\",\"getTime\",\"Date\",\"runner\",\"rid\",\"staller\",\"listenerCount\",\"emit\",\"action\",\"backend\",\"request\",\"deepCopy\",\"race\",\"code\",\"errorCode\",\"props\",\"reason\",\"message\",\"SERVER_ERROR\",\"BaseProvider\"]\n}\n"]