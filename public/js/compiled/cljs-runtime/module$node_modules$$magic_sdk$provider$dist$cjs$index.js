shadow$provide.module$node_modules$$magic_sdk$provider$dist$cjs$index=function(global,require,module,exports){function Tn(n){return String.fromCharCode(parseInt(n.slice(1),16))}function In(n){return`%${`00${n.charCodeAt(0).toString(16)}`.slice(-2)}`}function te(n){return btoa(encodeURIComponent(JSON.stringify(n)).replace(/%[0-9A-F]{2}/g,Tn))}function Oe(n){return JSON.parse(decodeURIComponent(Array.from(atob(n),In).join("")))}function _(n){return"undefined"==typeof n}function xn(n){return null===
n||_(n)?!1:!_(n.jsonrpc)&&!_(n.id)&&!_(n.method)&&!_(n.params)}function _e(n){return null===n||_(n)?!1:!_(n.jsonrpc)&&!_(n.id)&&(!_(n.result)||!_(n.error))}function wn(n){return null===n||_(n)?!1:"string"==typeof n&&Object.values(Ee.MagicPayloadMethod).includes(n)}function ke(n){return null===n||_(n)?!1:"number"==typeof n&&Object.values(Ee.RPCErrorCode).includes(n)}function ne(n){if(!n)return!0;for(let e in n)if(Object.hasOwnProperty.call(n,e))return!1;return!0}function ht(n,e){return Object.assign(m,
e),n}function qe(){return new C(N.SDKErrorCode.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function Nn(){return new C(N.SDKErrorCode.ModalNotReady,"Modal is not ready.")}function De(){return new C(N.SDKErrorCode.MalformedResponse,"Response from the Magic iframe is malformed.")}function We(n){return new C(N.SDKErrorCode.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${n}\` can be accessed. Do not invoke \`Extension.${n}\` inside an extension constructor.`)}
function Ue(n){let e=`Some extensions are incompatible with \`${m.sdkName}@${m.version}\`:`;return n.filter(t=>"undefined"!=typeof t.compat&&null!==t.compat).forEach(t=>{let r=t.compat[m.sdkName];"string"==typeof r?e+=`
  - Extension \`${t.name}\` supports version(s) \`${r}\``:r||(e+=`
  - Extension \`${t.name}\` does not support ${m.platform} environments.`)}),new C(N.SDKErrorCode.IncompatibleExtensions,e)}function Je(n){let r=n.argument+1,o=r%10,s=r%100;return new C(N.SDKErrorCode.InvalidArgument,`Invalid ${1===o&&11!==s?`${r}st`:2===o&&12!==s?`${r}nd`:3===o&&13!==s?`${r}rd`:`${r}th`} argument given to \`${n.procedure}\`.
  Expected: \`${n.expected}\`
  Received: \`${n.received}\``)}function $n(){return new F(N.SDKWarningCode.DuplicateIframe,"Duplicate iframes found.")}function Fe(){return new F(N.SDKWarningCode.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 \x3e 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}function Ge(){return new F(N.SDKWarningCode.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${m.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}
function v(n){let {method:e,removalVersions:t,useInstead:r}=n;return new F(N.SDKWarningCode.DeprecationNotice,`\`${e}\` will be removed from \`${m.sdkName}\` in version \`${t[m.sdkName]}\`.${r?` Use \`${r}\` instead.`:""}`)}function ge(){return Cn.next().value}function gt(n){return Object.defineProperty(n,ft,{value:!0,enumerable:!1}),n}function K(n){var e,t,r;return!!n[ft]||(n.jsonrpc=null!=(e=n.jsonrpc)?e:"2.0",n.id=ge(),n.method=null!=(t=n.method)?t:"noop",n.params=null!=(r=n.params)?r:[],gt(n)),
n}function p(n,e=[]){return gt({params:e,method:n,jsonrpc:"2.0",id:ge()})}function se(){let n=new Re;return{emitter:n,createChainingEmitterMethod:(r,o)=>(...s)=>(n[r].apply(n,s),o),createBoundEmitterMethod:r=>(...o)=>n[r].apply(n,o)}}function je(n){return!!n[Tt]}function oe(n){n=ve(n);let {createBoundEmitterMethod:t,createChainingEmitterMethod:r}=se(),o=Symbol("Promise.then"),s=Symbol("Promise.catch"),a=Symbol("Promise.finally"),i=(c,d)=>(...w)=>{w=d[c].apply(d,w);return l(w)},l=c=>Object.assign(c,
{[Tt]:!0,[o]:c[o]||c.then,[s]:c[s]||c.catch,[a]:c[a]||c.finally,then:i(o,c),catch:i(s,c),finally:i(a,c),on:r("on",c),once:r("once",c),addListener:r("addListener",c),off:r("off",c),removeListener:r("removeListener",c),removeAllListeners:r("removeAllListeners",c),emit:t("emit"),eventNames:t("eventNames"),listeners:t("listeners"),listenerCount:t("listenerCount")}),u=l(n.then(c=>(u.emit("done",c),u.emit("settled"),c),c=>{throw u.emit("error",c),u.emit("settled"),c;}));return u}function ve(n){return new Promise((e,
t)=>{e=n(e,t);Promise.resolve(e).catch(t)})}function U(n){return(...e)=>f(this,null,function*(){return Ie||(Ie=yield m.configureStorage()),yield Ie.ready(),Ie[n](...e)})}function Be(){let n=window.crypto.getRandomValues(new Uint8Array(16));n[6]=n[6]&15|64;n[8]=n[8]&191|128;let e="";return e+=n[0].toString(16),e+=n[1].toString(16),e+=n[2].toString(16),e+=n[3].toString(16),e+="-",e+=n[4].toString(16),e+=n[5].toString(16),e+="-",e+=n[6].toString(16),e+=n[7].toString(16),e+="-",e+=n[8].toString(16),e+=
n[9].toString(16),e+="-",e+=n[10].toString(16),e+=n[11].toString(16),e+=n[12].toString(16),e+=n[13].toString(16),e+=n[14].toString(16),e+=n[15].toString(16),e}function ae(){J(ie);J(Pe)}function Ve(){return f(this,null,function*(){var n=yield Fn();if(n){var {subtle:e}=window.crypto,t=yield A(Pe);if(t&&e){var r={iat:Math.floor((new Date).getTime()/1E3),jti:Be()};n=bt(Bn(JSON.stringify({typ:"dpop+jwt",alg:"ES256",jwk:n})));r=bt(Bn(JSON.stringify(r)));var JSCompiler_inline_result=`${n}.${r}`;JSCompiler_inline_result=
(new TextEncoder).encode(JSCompiler_inline_result);e=Xn(new Uint8Array(yield e.sign({name:Xe,hash:{name:"SHA-256"}},t,JSCompiler_inline_result)));return`${n}.${r}.${e}`}console.info("unable to find private key or webcrypto unsupported")}else console.info("unable to create public key or webcrypto is unsupported")})}function Fn(){return f(this,null,function*(){let n="undefined"!=typeof window&&!!window.crypto,e=n&&!!window.crypto.subtle;if(n&&e)return(yield A(ie))||(yield Gn()),A(ie);console.info("webcrypto is not supported")})}
function Gn(){return f(this,null,function*(){var {subtle:e}=window.crypto;var n=yield e.generateKey(Un,!0,["sign"]);let r=yield e.exportKey("jwk",n.privateKey);n=yield e.exportKey("jwk",n.publicKey);e=yield e.importKey("jwk",r,Jn,!1,["sign"]);yield k(Pe,e);yield k(ie,n)})}function bt(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function Bn(n){return encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,(t,r)=>String.fromCharCode(parseInt(r,16)))}function Xn(n){let e="";return n.forEach(t=>
{e+=String.fromCharCode(t)}),bt(e)}function Ne(n,e){return e?new URL(n,e):new URL(n)}function Vn(n){n=Object.getPrototypeOf(n);let t=[n];for(;n!==M.prototype;)n=Object.getPrototypeOf(n),t.push(n);return t}function wt(n){if(n.compat&&null!=n.compat[m.sdkName])if("string"==typeof n.compat[m.sdkName])a:{var JSCompiler_temp=mt(m.version);n=n.compat[m.sdkName];try{n=new O(n,void 0)}catch(r){JSCompiler_temp=!1;break a}JSCompiler_temp=n.test(JSCompiler_temp)}else JSCompiler_temp=!!n.compat[m.sdkName];else JSCompiler_temp=
!0;return JSCompiler_temp}function Hn(n){var o;let e=null!=(o=null==n?void 0:n.extensions)?o:[],t={},r=[];if(Array.isArray(e)?e.forEach(s=>{wt(s)?(s.init(this),(s.name||s.name!==L.Anonymous)&&(this[s.name]=s),s instanceof L.Internal&&(ne(s.config)||(t[s.name]=s.config))):r.push(s)}):Object.keys(e).forEach(s=>{if(wt(e[s])){e[s].init(this);let a=e[s];this[s]=a;a instanceof L.Internal&&(ne(a.config)||(t[e[s].name]=a.config))}else r.push(e[s])}),r.length)throw Ue(r);return t}function zn(n,e){return e&&
Array.isArray(n)?n.find(t=>t.id===e):n}function Zn(n,e){return f(this,null,function*(){let t=yield A("rt"),r;if("web"===m.platform)try{r=yield Ve()}catch(o){console.error("webcrypto error",o)}return r?t?{msgType:n,payload:e,jwt:r,rt:t}:{msgType:n,payload:e,jwt:r}:{msgType:n,payload:e}})}function Qn(n){return f(this,null,function*(){!n.data.rt||(yield k("rt",n.data.rt))})}var process=require("module$node_modules$process$browser");"use strict";var Nt=Object.create,Y=Object.defineProperty,$t=Object.defineProperties,
At=Object.getOwnPropertyDescriptor,Ct=Object.getOwnPropertyDescriptors,St=Object.getOwnPropertyNames,Ye=Object.getOwnPropertySymbols,Lt=Object.getPrototypeOf,Qe=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable,Ze=(n,e,t)=>e in n?Y(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,j=(n,e)=>{for(var t in e||(e={}))Qe.call(e,t)&&Ze(n,t,e[t]);if(Ye)for(t of Ye(e))Ot.call(e,t)&&Ze(n,t,e[t]);return n},et=(n,e)=>{for(var t in e)Y(n,t,{get:e[t],enumerable:!0})},tt=(n,
e,t,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let o of St(e))!Qe.call(n,o)&&o!==t&&Y(n,o,{get:()=>e[o],enumerable:!(r=At(e,o))||r.enumerable});return n},f=(n,e,t)=>new Promise((r,o)=>{var s=l=>{try{i(t.next(l))}catch(u){o(u)}},a=l=>{try{i(t.throw(l))}catch(u){o(u)}},i=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,a);i((t=t.apply(n,e)).next())}),Rt=((n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports))((fr,Ke)=>{function re(){}function On(n,e,t){this.fn=n;this.context=e;this.once=
t||!1}function yt(n,e,t,r,o){if("function"!=typeof t)throw new TypeError("The listener must be a function");t=new On(t,r||n,o);e=b?b+e:e;return n._events[e]?n._events[e].fn?n._events[e]=[n._events[e],t]:n._events[e].push(t):(n._events[e]=t,n._eventsCount++),n}function ye(n,e){0===--n._eventsCount?n._events=new re:delete n._events[e]}function I(){this._events=new re;this._eventsCount=0}var Ln=Object.prototype.hasOwnProperty,b="~";Object.create&&(re.prototype=Object.create(null),(new re).__proto__||
(b=!1));I.prototype.eventNames=function(){var e=[],t,r;if(0===this._eventsCount)return e;for(r in t=this._events)Ln.call(t,r)&&e.push(b?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};I.prototype.listeners=function(e){e=this._events[b?b+e:e];if(!e)return[];if(e.fn)return[e.fn];for(var o=0,s=e.length,a=Array(s);o<s;o++)a[o]=e[o].fn;return a};I.prototype.listenerCount=function(e){return(e=this._events[b?b+e:e])?e.fn?1:e.length:0};I.prototype.emit=function(e,
t,r,o,s,a){var i=b?b+e:e;if(!this._events[i])return!1;i=this._events[i];var u=arguments.length,c;if(i.fn){switch(i.once&&this.removeListener(e,i.fn,void 0,!0),u){case 1:return i.fn.call(i.context),!0;case 2:return i.fn.call(i.context,t),!0;case 3:return i.fn.call(i.context,t,r),!0;case 4:return i.fn.call(i.context,t,r,o),!0;case 5:return i.fn.call(i.context,t,r,o,s),!0;case 6:return i.fn.call(i.context,t,r,o,s,a),!0}var d=1;for(c=Array(u-1);d<u;d++)c[d-1]=arguments[d];i.fn.apply(i.context,c)}else{var w=
i.length;for(d=0;d<w;d++)switch(i[d].once&&this.removeListener(e,i[d].fn,void 0,!0),u){case 1:i[d].fn.call(i[d].context);break;case 2:i[d].fn.call(i[d].context,t);break;case 3:i[d].fn.call(i[d].context,t,r);break;case 4:i[d].fn.call(i[d].context,t,r,o);break;default:if(!c){var q=1;for(c=Array(u-1);q<u;q++)c[q-1]=arguments[q]}i[d].fn.apply(i[d].context,c)}}return!0};I.prototype.on=function(e,t,r){return yt(this,e,t,r,!1)};I.prototype.once=function(e,t,r){return yt(this,e,t,r,!0)};I.prototype.removeListener=
function(e,t,r,o){e=b?b+e:e;if(!this._events[e])return this;if(!t)return ye(this,e),this;var a=this._events[e];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||ye(this,e);else{for(var i=0,l=[],u=a.length;i<u;i++)(a[i].fn!==t||o&&!a[i].once||r&&a[i].context!==r)&&l.push(a[i]);l.length?this._events[e]=1===l.length?l[0]:l:ye(this,e)}return this};I.prototype.removeAllListeners=function(e){var t;return e?(t=b?b+e:e,this._events[t]&&ye(this,t)):(this._events=new re,this._eventsCount=0),this};I.prototype.off=
I.prototype.removeListener;I.prototype.addListener=I.prototype.on;I.prefixed=b;I.EventEmitter=I;"u">typeof Ke&&(Ke.exports=I)}),er={};et(er,{Extension:()=>L,MagicExtensionError:()=>G,MagicExtensionWarning:()=>X,MagicRPCError:()=>S,MagicSDKError:()=>C,MagicSDKWarning:()=>F,SDKBase:()=>le,STORE_KEY_PRIVATE_KEY:()=>Pe,STORE_KEY_PUBLIC_JWK:()=>ie,TypedEmitter:()=>Re,ViewController:()=>Ce,clearKeys:()=>ae,createDeprecationWarning:()=>v,createDuplicateIframeWarning:()=>$n,createExtensionNotInitializedError:()=>
We,createIncompatibleExtensionsError:()=>Ue,createInvalidArgumentError:()=>Je,createJwt:()=>Ve,createMalformedResponseError:()=>De,createMissingApiKeyError:()=>qe,createModalNotReadyError:()=>Nn,createPromiEvent:()=>oe,createPromise:()=>ve,createReactNativeEndpointConfigurationWarning:()=>Ge,createSDK:()=>ht,createSynchronousWeb3MethodWarning:()=>Fe,createTypedEmitter:()=>se,createURL:()=>Ne,decodeJSON:()=>Oe,encodeJSON:()=>te,getPayloadId:()=>ge,isEmpty:()=>ne,isJsonRpcErrorCode:()=>ke,isJsonRpcRequestPayload:()=>
xn,isJsonRpcResponsePayload:()=>_e,isMagicPayloadMethod:()=>wn,isPromiEvent:()=>je,storage:()=>H,uuid:()=>Be});module.exports=(n=>tt(Y({},"__esModule",{value:!0}),n))(er);var Le={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16},h="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},ee=function(n){let e={exports:{}};return n(e,
e.exports),e.exports}(function(n,e){let {MAX_SAFE_COMPONENT_LENGTH:t}=Le,r=(e=n.exports={}).re=[],o=e.src=[],s=e.t={},a=0;n=(l,u,c)=>{let d=a++;h(d,u);s[l]=d;o[d]=u;r[d]=new RegExp(u,c?"g":void 0)};n("NUMERICIDENTIFIER","0|[1-9]\\d*");n("NUMERICIDENTIFIERLOOSE","[0-9]+");n("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");n("MAINVERSION",`(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})`);n("MAINVERSIONLOOSE",`(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})`);
n("PRERELEASEIDENTIFIER",`(?:${o[s.NUMERICIDENTIFIER]}|${o[s.NONNUMERICIDENTIFIER]})`);n("PRERELEASEIDENTIFIERLOOSE",`(?:${o[s.NUMERICIDENTIFIERLOOSE]}|${o[s.NONNUMERICIDENTIFIER]})`);n("PRERELEASE",`(?:-(${o[s.PRERELEASEIDENTIFIER]}(?:\\.${o[s.PRERELEASEIDENTIFIER]})*))`);n("PRERELEASELOOSE",`(?:-?(${o[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[s.PRERELEASEIDENTIFIERLOOSE]})*))`);n("BUILDIDENTIFIER","[0-9A-Za-z-]+");n("BUILD",`(?:\\+(${o[s.BUILDIDENTIFIER]}(?:\\.${o[s.BUILDIDENTIFIER]})*))`);n("FULLPLAIN",
`v?${o[s.MAINVERSION]}${o[s.PRERELEASE]}?${o[s.BUILD]}?`);n("FULL",`^${o[s.FULLPLAIN]}$`);n("LOOSEPLAIN",`[v=\\s]*${o[s.MAINVERSIONLOOSE]}${o[s.PRERELEASELOOSE]}?${o[s.BUILD]}?`);n("LOOSE",`^${o[s.LOOSEPLAIN]}$`);n("GTLT","((?:\x3c|\x3e)?\x3d?)");n("XRANGEIDENTIFIERLOOSE",`${o[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);n("XRANGEIDENTIFIER",`${o[s.NUMERICIDENTIFIER]}|x|X|\\*`);n("XRANGEPLAIN",`[v=\\s]*(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:${o[s.PRERELEASE]})?${o[s.BUILD]}?)?)?`);
n("XRANGEPLAINLOOSE",`[v=\\s]*(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:${o[s.PRERELEASELOOSE]})?${o[s.BUILD]}?)?)?`);n("XRANGE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAIN]}$`);n("XRANGELOOSE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAINLOOSE]}$`);n("COERCE",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?(?:$|[^\\d])`);n("COERCERTL",o[s.COERCE],!0);n("LONETILDE","(?:~\x3e?)");n("TILDETRIM",`(\\s*)${o[s.LONETILDE]}\\s+`,!0);e.tildeTrimReplace=
"$1~";n("TILDE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAIN]}$`);n("TILDELOOSE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAINLOOSE]}$`);n("LONECARET","(?:\\^)");n("CARETTRIM",`(\\s*)${o[s.LONECARET]}\\s+`,!0);e.caretTrimReplace="$1^";n("CARET",`^${o[s.LONECARET]}${o[s.XRANGEPLAIN]}$`);n("CARETLOOSE",`^${o[s.LONECARET]}${o[s.XRANGEPLAINLOOSE]}$`);n("COMPARATORLOOSE",`^${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]})$|^$`);n("COMPARATOR",`^${o[s.GTLT]}\\s*(${o[s.FULLPLAIN]})$|^$`);n("COMPARATORTRIM",`(\\s*)${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]}|${o[s.XRANGEPLAIN]})`,
!0);e.comparatorTrimReplace="$1$2$3";n("HYPHENRANGE",`^\\s*(${o[s.XRANGEPLAIN]})\\s+-\\s+(${o[s.XRANGEPLAIN]})\\s*$`);n("HYPHENRANGELOOSE",`^\\s*(${o[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[s.XRANGEPLAINLOOSE]})\\s*$`);n("STAR","(\x3c|\x3e)?\x3d?\\s*\\*");n("GTE0","^\\s*\x3e\x3d\\s*0.0.0\\s*$");n("GTE0PRE","^\\s*\x3e\x3d\\s*0.0.0-0\\s*$")}),nt=/^[0-9]+$/,dt=(n,e)=>{let t=nt.test(n),r=nt.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},Ft={compareIdentifiers:dt,rcompareIdentifiers:(n,
e)=>dt(e,n)},{MAX_LENGTH:rt,MAX_SAFE_INTEGER:pe}=Le,{re:st,t:ot}=ee,{compareIdentifiers:Z}=Ft,y=class{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof y){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>rt)throw new TypeError(`version is longer than ${rt} characters`);h("SemVer",e,t);this.options=t;this.loose=!!t.loose;this.includePrerelease=
!!t.includePrerelease;t=e.trim().match(t.loose?st[ot.LOOSE]:st[ot.FULL]);if(!t)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>pe||0>this.major)throw new TypeError("Invalid major version");if(this.minor>pe||0>this.minor)throw new TypeError("Invalid minor version");if(this.patch>pe||0>this.patch)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let s=+o;if(0<=s&&s<
pe)return s}return o}):this.prerelease=[];this.build=t[5]?t[5].split("."):[];this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(h("SemVer.compare",this.version,this.options,e),!(e instanceof y)){if("string"==typeof e&&e===this.version)return 0;e=new y(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof
y||(e=new y(e,this.options)),Z(this.major,e.major)||Z(this.minor,e.minor)||Z(this.patch,e.patch)}comparePre(e){if(e instanceof y||(e=new y(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],o=e.prerelease[t];if(h("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return Z(r,
o)}while(++t)}compareBuild(e){e instanceof y||(e=new y(e,this.options));let t=0;do{let r=this.build[t],o=e.build[t];if(h("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return Z(r,o)}while(++t)}inc(e,t){switch(e){case "premajor":this.minor=this.patch=this.prerelease.length=0;this.major++;this.inc("pre",t);break;case "preminor":this.patch=this.prerelease.length=0;this.minor++;this.inc("pre",t);break;case "prepatch":this.prerelease.length=
0;this.inc("patch",t);this.inc("pre",t);break;case "prerelease":0===this.prerelease.length&&this.inc("patch",t);this.inc("pre",t);break;case "major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++;this.patch=this.minor=0;this.prerelease=[];break;case "minor":0===this.patch&&0!==this.prerelease.length||this.minor++;this.patch=0;this.prerelease=[];break;case "patch":0===this.prerelease.length&&this.patch++;this.prerelease=[];break;case "pre":if(0===this.prerelease.length)this.prerelease=
[0];else{for(e=this.prerelease.length;0<=--e;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw Error(`invalid increment argument: ${e}`);}return this.format(),this.raw=this.version,this}},B=(n,e,t)=>(new y(n,t)).compare(new y(e,t)),Se=(n,e,t,r)=>{switch(e){case "\x3d\x3d\x3d":return"object"==typeof n&&(n=n.version),"object"==typeof t&&
(t=t.version),n===t;case "!\x3d\x3d":return"object"==typeof n&&(n=n.version),"object"==typeof t&&(t=t.version),n!==t;case "":case "\x3d":case "\x3d\x3d":return 0===B(n,t,r);case "!\x3d":return 0!==B(n,t,r);case "\x3e":return 0<B(n,t,r);case "\x3e\x3d":return 0<=B(n,t,r);case "\x3c":return 0>B(n,t,r);case "\x3c\x3d":return 0>=B(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`);}},Q=Symbol("SemVer ANY"),D=class{static get ANY(){return Q}constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,
includePrerelease:!1}),e instanceof D){if(e.loose===!!t.loose)return e;e=e.value}h("comparator",e,t);this.options=t;this.loose=!!t.loose;this.parse(e);this.semver===Q?this.value="":this.value=this.operator+this.semver.version;h("comp",this)}parse(e){let r=e.match(this.options.loose?it[at.COMPARATORLOOSE]:it[at.COMPARATOR]);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"";"\x3d"===this.operator&&(this.operator="");r[2]?this.semver=new y(r[2],this.options.loose):
this.semver=Q}toString(){return this.value}test(e){if(h("Comparator.test",e,this.options.loose),this.semver===Q||e===Q)return!0;if("string"==typeof e)try{e=new y(e,this.options)}catch(t){return!1}return Se(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof D))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(new O(e.value,t)).test(this.value);if(""===e.operator)return""===
e.value||(new O(this.value,t)).test(e.semver);let r=!("\x3e\x3d"!==this.operator&&"\x3e"!==this.operator||"\x3e\x3d"!==e.operator&&"\x3e"!==e.operator),o=!("\x3c\x3d"!==this.operator&&"\x3c"!==this.operator||"\x3c\x3d"!==e.operator&&"\x3c"!==e.operator),s=this.semver.version===e.semver.version,a=!("\x3e\x3d"!==this.operator&&"\x3c\x3d"!==this.operator||"\x3e\x3d"!==e.operator&&"\x3c\x3d"!==e.operator),i=Se(this.semver,"\x3c",e.semver,t)&&("\x3e\x3d"===this.operator||"\x3e"===this.operator)&&("\x3c\x3d"===
e.operator||"\x3c"===e.operator);e=Se(this.semver,"\x3e",e.semver,t)&&("\x3c\x3d"===this.operator||"\x3c"===this.operator)&&("\x3e\x3d"===e.operator||"\x3e"===e.operator);return r||o||s&&a||i||e}},{re:it,t:at}=ee,O=class{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof O)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new O(e.raw,t);if(e instanceof D)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=
!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e$jscomp$0){let {loose:t}=this.options;e$jscomp$0=e$jscomp$0.trim();e$jscomp$0=e$jscomp$0.replace(t?T[R.HYPHENRANGELOOSE]:T[R.HYPHENRANGE],
fn(this.options.includePrerelease));h("hyphen replace",e$jscomp$0);e$jscomp$0=e$jscomp$0.replace(T[R.COMPARATORTRIM],rn);h("comparator trim",e$jscomp$0,T[R.COMPARATORTRIM]);e$jscomp$0=(e$jscomp$0=(e$jscomp$0=e$jscomp$0.replace(T[R.TILDETRIM],sn)).replace(T[R.CARETTRIM],on)).split(/\s+/).join(" ");let o=t?T[R.COMPARATORLOOSE]:T[R.COMPARATOR];return e$jscomp$0.split(" ").map(s=>{var e=this.options;h("comp",s,e);s=un(s,e);h("caret",s);s=ln(s,e);h("tildes",s);s=pn(s,e);h("xrange",s);var n=s;return s=
(h("replaceStars",n,e),n.trim().replace(T[R.STAR],"")),h("stars",s),s}).join(" ").split(/\s+/).map(s=>{var e=this.options;return h("replaceGTE0",s,e),s.trim().replace(T[e.includePrerelease?R.GTE0PRE:R.GTE0],"")}).filter(this.options.loose?s=>!!s.match(o):()=>!0).map(s=>new D(s,this.options))}intersects(e,t){if(!(e instanceof O))throw new TypeError("a Range is required");return this.set.some(r=>lt(r,t)&&e.set.some(o=>lt(o,t)&&r.every(s=>o.every(a=>s.intersects(a,t)))))}test(e$jscomp$0){if(!e$jscomp$0)return!1;
if("string"==typeof e$jscomp$0)try{e$jscomp$0=new y(e$jscomp$0,this.options)}catch(t){return!1}for(let t=0;t<this.set.length;t++){a:{var JSCompiler_inline_result=this.set[t];var e=e$jscomp$0,t$jscomp$0=this.options;for(var r=0;r<JSCompiler_inline_result.length;r++)if(!JSCompiler_inline_result[r].test(e)){JSCompiler_inline_result=!1;break a}if(e.prerelease.length&&!t$jscomp$0.includePrerelease){for(t$jscomp$0=0;t$jscomp$0<JSCompiler_inline_result.length;t$jscomp$0++)if(h(JSCompiler_inline_result[t$jscomp$0].semver),
JSCompiler_inline_result[t$jscomp$0].semver!==D.ANY&&0<JSCompiler_inline_result[t$jscomp$0].semver.prerelease.length)if(r=JSCompiler_inline_result[t$jscomp$0].semver,r.major===e.major&&r.minor===e.minor&&r.patch===e.patch){JSCompiler_inline_result=!0;break a}JSCompiler_inline_result=!1}else JSCompiler_inline_result=!0}if(JSCompiler_inline_result)return!0}return!1}},{re:T,t:R,comparatorTrimReplace:rn,tildeTrimReplace:sn,caretTrimReplace:on}=ee,lt=(n,e)=>{let t=!0;n=n.slice();let o=n.pop();for(;t&&
n.length;)t=n.every(s=>o.intersects(s,e)),o=n.pop();return t},P=n=>!n||"x"===n.toLowerCase()||"*"===n,ln=(n,e)=>n.trim().split(/\s+/).map(t=>cn(t,e)).join(" "),cn=(n,e)=>n.replace(e.loose?T[R.TILDELOOSE]:T[R.TILDE],(r,o,s,a,i)=>{let l;return h("tilde",n,r,o,s,a,i),P(o)?l="":P(s)?l=`>=${o}.0.0 <${+o+1}.0.0-0`:P(a)?l=`>=${o}.${s}.0 <${o}.${+s+1}.0-0`:i?(h("replaceTilde pr",i),l=`>=${o}.${s}.${a}-${i} <${o}.${+s+1}.0-0`):l=`>=${o}.${s}.${a} <${o}.${+s+1}.0-0`,h("tilde return",l),l}),un=(n,e)=>n.trim().split(/\s+/).map(t=>
dn(t,e)).join(" "),dn=(n,e)=>{h("caret",n,e);let r=e.includePrerelease?"-0":"";return n.replace(e.loose?T[R.CARETLOOSE]:T[R.CARET],(o,s,a,i,l)=>{let u;return h("caret",n,o,s,a,i,l),P(s)?u="":P(a)?u=`>=${s}.0.0${r} <${+s+1}.0.0-0`:P(i)?u="0"===s?`>=${s}.${a}.0${r} <${s}.${+a+1}.0-0`:`>=${s}.${a}.0${r} <${+s+1}.0.0-0`:l?(h("replaceCaret pr",l),u="0"===s?"0"===a?`>=${s}.${a}.${i}-${l} <${s}.${a}.${+i+1}-0`:`>=${s}.${a}.${i}-${l} <${s}.${+a+1}.0-0`:`>=${s}.${a}.${i}-${l} <${+s+1}.0.0-0`):(h("no pr"),
u="0"===s?"0"===a?`>=${s}.${a}.${i}${r} <${s}.${a}.${+i+1}-0`:`>=${s}.${a}.${i}${r} <${s}.${+a+1}.0-0`:`>=${s}.${a}.${i} <${+s+1}.0.0-0`),h("caret return",u),u})},pn=(n,e)=>(h("replaceXRanges",n,e),n.split(/\s+/).map(t=>mn(t,e)).join(" ")),mn=(n,e)=>{n=n.trim();return n.replace(e.loose?T[R.XRANGELOOSE]:T[R.XRANGE],(r,o,s,a,i,l)=>{h("xRange",n,r,o,s,a,i,l);let u=P(s),c=u||P(a),d=c||P(i);return"\x3d"===o&&d&&(o=""),l=e.includePrerelease?"-0":"",u?r="\x3e"===o||"\x3c"===o?"\x3c0.0.0-0":"*":o&&d?(c&&
(a=0),i=0,"\x3e"===o?(o="\x3e\x3d",c?(s=+s+1,a=0,i=0):(a=+a+1,i=0)):"\x3c\x3d"===o&&(o="\x3c",c?s=+s+1:a=+a+1),"\x3c"===o&&(l="-0"),r=`${o+s}.${a}.${i}${l}`):c?r=`>=${s}.0.0${l} <${+s+1}.0.0-0`:d&&(r=`>=${s}.${a}.0${l} <${s}.${+a+1}.0-0`),h("xRange return",r),r})},fn=n=>(e,t,r,o,s,a,i,l,u,c,d,w,q)=>`${P(r)?"":P(o)?`>=${r}.0.0${n?"-0":""}`:P(s)?`>=${r}.${o}.0${n?"-0":""}`:a?`>=${t}`:`>=${t}${n?"-0":""}`} ${P(u)?"":P(c)?`<${+u+1}.0.0-0`:P(d)?`<${u}.${+c+1}.0-0`:w?`<=${u}.${c}.${d}-${w}`:n?`<${u}.${c}.${+d+
1}-0`:`<=${l}`}`.trim(),{MAX_LENGTH:yn}=Le,{re:ct,t:ut}=ee,vn=(n,e)=>{if(e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1}),n instanceof y)return n;if("string"!=typeof n||n.length>yn||!(e.loose?ct[ut.LOOSE]:ct[ut.FULL]).test(n))return null;try{return new y(n,e)}catch(t){return null}},{re:me,t:he}=ee,mt=(n,e)=>{if(n instanceof y)return n;if("number"==typeof n&&(n=String(n)),"string"!=typeof n)return null;let t=null;if((e=e||{}).rtl){let r;for(;(r=me[he.COERCERTL].exec(n))&&(!t||t.index+t[0].length!==
n.length);)t&&r.index+r[0].length===t.index+t[0].length||(t=r),me[he.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;me[he.COERCERTL].lastIndex=-1}else t=n.match(me[he.COERCE]);return null===t?null:vn(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)},N=require("module$node_modules$$magic_sdk$types$dist$cjs$index"),Ee=require("module$node_modules$$magic_sdk$types$dist$cjs$index"),m={},Et={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare",
"@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},C=class extends Error{constructor(t,r){super(`Magic SDK Error: [${t}] ${r}`);this.code=t;this.rawMessage=r;this.__proto__=Error;Object.setPrototypeOf(this,C.prototype)}},S=class extends Error{constructor(t){super();this.__proto__=Error;let r=Number(null==t?void 0:t.code);this.rawMessage=(null==t?void 0:t.message)||"Internal error";this.code=ke(r)?r:N.RPCErrorCode.InternalError;this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`;this.data=
(null==t?void 0:t.data)||void 0;Object.setPrototypeOf(this,S.prototype)}},F=class{constructor(e,t){this.code=e;this.rawMessage=t;this.message=`Magic SDK Warning: [${e}] ${t}`}log(){console.warn(this.message)}},G=class extends Error{constructor(t,r,o,s){super(`Magic Extension Error (${t.name}): [${r}] ${o}`);this.code=r;this.rawMessage=o;this.data=s;this.__proto__=Error;Object.setPrototypeOf(this,G.prototype)}},X=class{constructor(e,t,r){this.code=t;this.rawMessage=r;this.message=`Magic Extension Warning (${e.name}): [${t}] ${r}`}log(){console.warn(this.message)}},
$=require("module$node_modules$$magic_sdk$types$dist$cjs$index"),V=require("module$node_modules$$magic_sdk$types$dist$cjs$index"),Cn=function*(){let n=0;for(;;)n<Number.MAX_SAFE_INTEGER?yield++n:n=0}(),ft=Symbol("Payload pre-processed by Magic SDK"),W=class{constructor(e){e instanceof W?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):_e(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=
e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return"undefined"!=typeof this._error&&null!==this._error}get hasResult(){return"undefined"!=typeof this._result}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},vt=((n,e,t)=>(t=null!=n?Nt(Lt(n)):{},tt(!e&&n&&n.__esModule?t:Y(t,"default",{value:n,enumerable:!0}),n)))(Rt()),Re=class extends vt.default{},
Tt=Symbol("isPromiEvent"),M=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(V.MagicOutgoingWindowMessage.MAGIC_HANDLE_REQUEST,K(e)),r=oe((s,a)=>{t.then(i=>{if(o(),i.hasError)a(new S(i.payload.error));else if(i.hasResult)s(i.payload.result);else throw De();}).catch(i=>{o();a(i)})}),o=this.overlay.on(V.MagicIncomingWindowMessage.MAGIC_HANDLE_EVENT,s=>{var i;({response:s}=s.data);if(s.id===e.id&&(null==(i=s.result)?0:i.event)){let {event:l,params:u=
[]}=s.result;r.emit(l,...u)}});return r}createIntermediaryEvent(e,t){return o=>{o=p(V.MagicPayloadMethod.IntermediaryEvent,[{payloadId:t,eventType:e,args:o}]);this.request(o)}}},x={"magic-sdk":"v18.0.0","@magic-sdk/react-native":"v14.0.0","@magic-sdk/react-native-bare":"v19.0.0","@magic-sdk/react-native-expo":"v19.0.0"},Te=class extends M{loginWithMagicLink(e){v({method:"auth.loginWithMagicLink()",removalVersions:x,useInstead:"@magic-sdk/react-native"===m.sdkName||"@magic-sdk/react-native-bare"===
m.sdkName||"@magic-sdk/react-native-expo"===m.sdkName?"@magic-ext/auth auth.loginWithEmailOTP()":"@magic-ext/auth auth.loginWithMagicLink()"}).log();let {email:r,showUI:o=!0,redirectURI:s}=e;e=p(this.sdk.testMode?$.MagicPayloadMethod.LoginWithMagicLinkTestMode:$.MagicPayloadMethod.LoginWithMagicLink,[{email:r,showUI:o,redirectURI:s}]);return this.request(e)}loginWithSMS(e){v({method:"auth.loginWithSMS()",removalVersions:x,useInstead:"@magic-ext/auth auth.loginWithSMS()"}).log();({phoneNumber:e}=e);
e=p(this.sdk.testMode?$.MagicPayloadMethod.LoginWithSmsTestMode:$.MagicPayloadMethod.LoginWithSms,[{phoneNumber:e,showUI:!0}]);return this.request(e)}loginWithEmailOTP(e){v({method:"auth.loginWithEmailOTP()",removalVersions:x,useInstead:"@magic-ext/auth auth.loginWithEmailOTP()"}).log();let {email:t,showUI:r}=e,o=p(this.sdk.testMode?$.MagicPayloadMethod.LoginWithEmailOTPTestMode:$.MagicPayloadMethod.LoginWithEmailOTP,[{email:t,showUI:r}]);return r?this.request(o):(e=this.request(o),e&&(e.on("verify-email-otp",
a=>{this.createIntermediaryEvent("verify-email-otp",o.id)(a)}),e.on("cancel",()=>{this.createIntermediaryEvent("cancel",o.id)()})),e)}loginWithCredential(e){v({method:"auth.loginWithCredential()",removalVersions:x,useInstead:"@magic-ext/auth auth.loginWithCredential()"}).log();let t=null!=e?e:"";e||"web"!==m.platform||(t=window.location.search,window.history.replaceState(null,"",window.location.origin+window.location.pathname));e=p(this.sdk.testMode?$.MagicPayloadMethod.LoginWithCredentialTestMode:
$.MagicPayloadMethod.LoginWithCredential,[t]);return this.request(e)}setAuthorizationToken(e){v({method:"auth.setAuthorizationToken()",removalVersions:x,useInstead:"@magic-ext/auth auth.setAuthorizationToken()"}).log();e=p($.MagicPayloadMethod.SetAuthorizationToken,[{jwt:e}]);return this.request(e)}updateEmailWithUI(e){v({method:"auth.updateEmailWithUI()",removalVersions:x,useInstead:"@magic-ext/auth auth.updateEmailWithUI()"}).log();let {email:t,showUI:r=!0}=e;e=p(this.sdk.testMode?$.MagicPayloadMethod.UpdateEmailTestMode:
$.MagicPayloadMethod.UpdateEmail,[{email:t,showUI:r}]);return this.request(e)}updatePhoneNumberWithUI(){v({method:"auth.updatePhoneNumberWithUI()",removalVersions:x,useInstead:"@magic-ext/auth auth.updatePhoneNumberWithUI()"}).log();let e=p(this.sdk.testMode?$.MagicPayloadMethod.UpdatePhoneNumberTestMode:$.MagicPayloadMethod.UpdatePhoneNumber);return this.request(e)}},g=require("module$node_modules$$magic_sdk$types$dist$cjs$index"),H={};et(H,{clear:()=>_n,getItem:()=>A,iterate:()=>Wn,key:()=>qn,keys:()=>
Dn,length:()=>kn,removeItem:()=>J,setItem:()=>k});var Ie,A=U("getItem"),k=U("setItem"),J=U("removeItem"),_n=U("clear"),kn=U("length"),qn=U("key"),Dn=U("keys"),Wn=U("iterate"),Pe="STORE_KEY_PRIVATE_KEY",ie="STORE_KEY_PUBLIC_JWK",Xe="ECDSA",Un={name:Xe,namedCurve:"P-256"},Jn={name:Xe,namedCurve:"P-256"},be=class extends M{constructor(){super(...arguments);this.localForageKey="mc_active_wallet"}getIdToken(t){t=p(this.sdk.testMode?g.MagicPayloadMethod.GetIdTokenTestMode:g.MagicPayloadMethod.GetIdToken,
[t]);return this.request(t)}generateIdToken(t){t=p(this.sdk.testMode?g.MagicPayloadMethod.GenerateIdTokenTestMode:g.MagicPayloadMethod.GenerateIdToken,[t]);return this.request(t)}getInfo(){return f(this,null,function*(){var t=yield A(this.localForageKey);t=p(g.MagicPayloadMethod.GetInfo,[{walletType:t}]);return this.request(t)})}isLoggedIn(){let t=p(this.sdk.testMode?g.MagicPayloadMethod.IsLoggedInTestMode:g.MagicPayloadMethod.IsLoggedIn);return this.request(t)}logout(){ae();J(this.localForageKey);
let t=p(this.sdk.testMode?g.MagicPayloadMethod.LogoutTestMode:g.MagicPayloadMethod.Logout);return this.request(t)}requestInfoWithUI(t){t=p(g.MagicPayloadMethod.RequestUserInfoWithUI,t?[t]:[]);return this.request(t)}showSettings(t){t=p(this.sdk.testMode?g.MagicPayloadMethod.UserSettingsTestMode:g.MagicPayloadMethod.UserSettings,[t]);return this.request(t)}recoverAccount(t){t=p(this.sdk.testMode?g.MagicPayloadMethod.RecoverAccountTestMode:g.MagicPayloadMethod.RecoverAccount,[t]);return this.request(t)}getMetadata(){v({method:"user.getMetadata()",
removalVersions:x,useInstead:"user.getInfo()"}).log();let t=p(this.sdk.testMode?g.MagicPayloadMethod.GetMetadataTestMode:g.MagicPayloadMethod.GetMetadata);return this.request(t)}updateEmail(t){v({method:"user.updateEmail()",removalVersions:x,useInstead:"auth.updateEmailWithUI()"}).log();let {email:r,showUI:o=!0}=t;t=p(this.sdk.testMode?g.MagicPayloadMethod.UpdateEmailTestMode:g.MagicPayloadMethod.UpdateEmail,[{email:r,showUI:o}]);return this.request(t)}updatePhoneNumber(){v({method:"user.updatePhoneNumber()",
removalVersions:x,useInstead:"auth.updatePhoneNumberWithUI()"}).log();let t=p(this.sdk.testMode?g.MagicPayloadMethod.UpdatePhoneNumberTestMode:g.MagicPayloadMethod.UpdatePhoneNumber);return this.request(t)}},E=require("module$node_modules$$magic_sdk$types$dist$cjs$index"),Me=class extends M{constructor(){super(...arguments);this.localForageKey="mc_active_wallet"}connectWithUI(){return f(this,null,function*(){if(this.isMetaMaskBrowser())try{if(yield this.isWalletEnabled(E.Wallets.MetaMask))return this.autoConnectIfWalletBrowser(E.Wallets.MetaMask)}catch(s){console.error(s)}if(this.isCoinbaseWalletBrowser())try{if(yield this.isWalletEnabled(E.Wallets.CoinbaseWallet))return this.autoConnectIfWalletBrowser(E.Wallets.CoinbaseWallet)}catch(s){console.error(s)}var t=
this.getUserEnv();let r=p(E.MagicPayloadMethod.Login,[t]);t=this.request(r);return t.on(E.Events.WalletSelected,s=>{var JSCompiler_temp_const=this.handleWalletSelected;s=j({},s);s=$t(s,Ct({payloadId:r.id}));return JSCompiler_temp_const.call(this,s)}),t})}showUI(){let t=p(E.MagicPayloadMethod.ShowUI);return this.request(t)}getInfo(){return f(this,null,function*(){v({method:"wallet.getInfo()",removalVersions:x,useInstead:"user.getInfo()"}).log();var t=yield A(this.localForageKey);t=p(E.MagicPayloadMethod.GetInfo,
[{walletType:t}]);return this.request(t)})}disconnect(){v({method:"wallet.disconnect()",removalVersions:x,useInstead:"user.logout()"}).log();ae();J(this.localForageKey);let t=p(E.MagicPayloadMethod.Disconnect);return this.request(t)}requestUserInfoWithUI(t){v({method:"wallet.requestUserInfoWithUI()",removalVersions:x,useInstead:"user.requestUserInfoWithUI()"}).log();t=p(E.MagicPayloadMethod.RequestUserInfoWithUI,t?[t]:[]);return this.request(t)}getProvider(){return f(this,null,function*(){switch(yield A(this.localForageKey)){case E.Wallets.MetaMask:return this.getMetaMaskProvider();
case E.Wallets.CoinbaseWallet:return this.getCoinbaseProvider();default:return this.sdk.rpcProvider}})}isMetaMaskInstalled(){var t,r,o;return(null==(t=window.ethereum)?void 0:t.isMetaMask)||!(null==(o=null==(r=window.ethereum)?void 0:r.providers)||!o.find(s=>null==s?void 0:s.isMetaMask))}isMetaMaskBrowser(){return this.isMobile()&&this.isMetaMaskInstalled()}getMetaMaskProvider(){var t,r;return(null==(r=null==(t=window.ethereum)?void 0:t.providers)?void 0:r.find(o=>null==o?void 0:o.isMetaMask))||window.ethereum}connectToMetaMask(){if(this.isMobile()&&
!this.isMetaMaskInstalled()){let t=`https://metamask.app.link/dapp/${window.location.href.replace(/(^\w+:|^)\/\//,"")}`;window.location.href=t}return this.getMetaMaskProvider().request({method:"eth_requestAccounts"})}isCoinbaseWalletInstalled(){var t,r,o;return(null==(t=window.ethereum)?void 0:t.isCoinbaseWallet)||!(null==(o=null==(r=window.ethereum)?void 0:r.providers)||!o.find(s=>null==s?void 0:s.isCoinbaseWallet))}isCoinbaseWalletBrowser(){var t;return!(null==(t=window.ethereum)||!t.isCoinbaseBrowser)}getCoinbaseProvider(){var t,
r;return(null==(r=null==(t=window.ethereum)?void 0:t.providers)?void 0:r.find(o=>null==o?void 0:o.isCoinbaseWallet))||window.ethereum}connectToCoinbaseWallet(){if(this.isMobile()&&!this.isCoinbaseWalletBrowser()){let r=`https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(window.location.href)}`;window.location.href=r}return this.getCoinbaseProvider().request({method:"eth_requestAccounts"})}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Silk|Opera Mini/i.test(navigator.userAgent)}getUserEnv(){return{env:{isMetaMaskInstalled:this.isMetaMaskInstalled(),
isCoinbaseWalletInstalled:this.isCoinbaseWalletInstalled()}}}connectToThirdPartyWallet(t){switch(t){case E.Wallets.MetaMask:return this.connectToMetaMask();case E.Wallets.CoinbaseWallet:return this.connectToCoinbaseWallet();default:throw Error(`Invalid provider: ${t}. Must be one of "metamask" or "coinbase_wallet".`);}}isWalletEnabled(t){t=p("mc_is_wallet_enabled",[{wallet:t}]);return this.request(t)}handleWalletSelected(t){return f(this,null,function*(){try{let r=yield this.connectToThirdPartyWallet(t.wallet);
yield k(this.localForageKey,t.wallet);this.createIntermediaryEvent(E.Events.WalletConnected,t.payloadId)(r)}catch(r){console.error(r),this.createIntermediaryEvent(E.Events.WalletRejected,t.payloadId)()}})}autoConnectIfWalletBrowser(t){return f(this,null,function*(){var r;t===E.Wallets.MetaMask&&(r=yield this.getMetaMaskProvider().request({method:"eth_requestAccounts"}));t===E.Wallets.CoinbaseWallet&&(r=yield this.getCoinbaseProvider().request({method:"eth_requestAccounts"}));yield k(this.localForageKey,
t);r=p(E.MagicPayloadMethod.AutoConnect,[{wallet:t,address:r}]);return this.request(r)})}},He=require("module$node_modules$$magic_sdk$types$dist$cjs$index"),{createBoundEmitterMethod:xe,createChainingEmitterMethod:z}=se(),we=class extends M{constructor(){super(...arguments);this.isMagic=!0;this.on=z("on",this);this.once=z("once",this);this.addListener=z("addListener",this);this.off=z("off",this);this.removeListener=z("removeListener",this);this.removeAllListeners=z("removeAllListeners",this);this.emit=
xe("emit");this.eventNames=xe("eventNames");this.listeners=xe("listeners");this.listenerCount=xe("listenerCount")}sendAsync(t,r){if(!r)throw Je({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:null===r?"null":typeof r});Array.isArray(t)?this.overlay.post(He.MagicOutgoingWindowMessage.MAGIC_HANDLE_REQUEST,t.map(o=>{o=K(o);return this.prefixPayloadMethodForTestMode(o),o})).then(o=>{r(null,o.map(s=>{var n=j({},s.payload);s={error:s.hasError?new S(s.payload.error):null};
return $t(n,Ct(s))}))}):(t=K(t),this.prefixPayloadMethodForTestMode(t),this.overlay.post(He.MagicOutgoingWindowMessage.MAGIC_HANDLE_REQUEST,t).then(s=>{r(s.hasError?new S(s.payload.error):null,s.payload)}))}send(t,r){if("string"==typeof t)return t=p(t,Array.isArray(r)?r:[]),this.request(t);if(Array.isArray(t)||r)this.sendAsync(t,r);else return r=Fe(),r.log(),(new W(t)).applyError({code:-32603,message:r.rawMessage}).payload}enable(){let t=p("eth_accounts");return this.request(t)}request(t){return this.prefixPayloadMethodForTestMode(t),
super.request(t)}prefixPayloadMethodForTestMode(t){this.sdk.testMode&&(t.method=`${"testMode/eth/"}${t.method}`)}},Mt=["request","overlay","sdk"],$e=class extends M{constructor(){super(void 0);this.__sdk_access_field_descriptors__=new Map;this.__is_initialized__=!1;this.utils={createPromiEvent:oe,isPromiEvent:je,encodeJSON:te,decodeJSON:Oe,createJsonRpcRequestPayload:p,standardizeJsonRpcRequestPayload:K,storage:H};let t=[this,...Vn(this)];Mt.forEach(r=>{var o=t.map(l=>Object.getOwnPropertyDescriptor(l,
r));let s=o.findIndex(l=>!!l);(o=o[s])&&(this.__sdk_access_field_descriptors__.set(r,{descriptor:o,isPrototypeField:0<s}),Object.defineProperty(this,r,{configurable:!0,get:()=>{throw We(r);}}))})}init(t){this.__is_initialized__||(Mt.forEach(r=>{if(this.__sdk_access_field_descriptors__.has(r)){let {descriptor:o,isPrototypeField:s}=this.__sdk_access_field_descriptors__.get(r);s?delete this[r]:Object.defineProperty(this,r,o)}}),this.sdk=t,this.__is_initialized__=!0)}createDeprecationWarning(t){let {method:r,
removalVersion:o,useInstead:s}=t;return new X(this,"DEPRECATION_NOTICE",`\`${r}\` will be removed from this Extension in version \`${o}\`.${s?` Use \`${s}\` instead.`:""}`)}createWarning(t,r){return new X(this,t,r)}createError(t,r,o){return new G(this,t,r,o)}},L=class extends $e{};L.Internal=class extends $e{};L.Anonymous="anonymous extension";var xt=require("module$node_modules$$magic_sdk$types$dist$cjs$index"),Ae=class extends M{purchase(e){e=p(xt.MagicPayloadMethod.NFTPurchase,[e]);return this.request(e)}},
ce=class{constructor(e,t){this.apiKey=e;var a;if(!e)throw qe();"react-native"===m.platform&&(null==t?0:t.endpoint)&&Ge().log();let {defaultEndpoint:r,version:o}=m;this.testMode=!(null==t||!t.testMode);this.endpoint=Ne(null!=(a=null==t?void 0:t.endpoint)?a:r).origin;this.auth=new Te(this);this.user=new be(this);this.wallet=new Me(this);this.nft=new Ae(this);this.rpcProvider=new we(this);e=Hn.call(this,t);this.parameters=te(j({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:
"",ETH_NETWORK:null==t?void 0:t.network,host:Ne(this.endpoint).host,sdk:Et[m.sdkName],version:o,ext:ne(e)?void 0:e,locale:(null==t?void 0:t.locale)||"en_US"},m.bundleId?{bundleId:m.bundleId}:{}))}get overlay(){if(!ce.__overlays__.has(this.parameters)){let e=new m.ViewController(this.endpoint,this.parameters);e.init();ce.__overlays__.set(this.parameters,e)}return ce.__overlays__.get(this.parameters)}preload(){return f(this,null,function*(){yield this.overlay.ready})}},le=ce;le.__overlays__=new Map;
var ue=require("module$node_modules$$magic_sdk$types$dist$cjs$index"),Ce=class{constructor(e,t){this.endpoint=e;this.parameters=t;this.messageHandlers=new Set;this.ready=this.waitForReady();this.listen()}post(e,t){return f(this,null,function*(){return ve(r=>f(this,null,function*(){yield this.ready;let o$jscomp$0=[],s=Array.isArray(t)?t.map(u=>u.id):[],a=yield Zn(`${e}-${this.parameters}`,t);yield this._post(a);let l=this.on(ue.MagicIncomingWindowMessage.MAGIC_HANDLE_RESPONSE,(u=>c=>{var o;var JSCompiler_inline_result=
null==(o=c.data.response)?void 0:o.id;o=zn(t,JSCompiler_inline_result);JSCompiler_inline_result&&o?(o=(new W(o)).applyResult(c.data.response.result).applyError(c.data.response.error),JSCompiler_inline_result={id:JSCompiler_inline_result,response:o}):JSCompiler_inline_result={};let {id:d,response:w}=JSCompiler_inline_result;Qn(c);d&&w&&Array.isArray(t)&&s.includes(d)?(o$jscomp$0.push(w),o$jscomp$0.length===t.length&&(u(),r(o$jscomp$0))):d&&w&&!Array.isArray(t)&&d===t.id&&(u(),r(w))})(()=>l()))}))})}on(e,
t){let r=t.bind(window),o=s=>{s.data.msgType===`${e}-${this.parameters}`&&r(s)};return this.messageHandlers.add(o),()=>this.messageHandlers.delete(o)}waitForReady(){return new Promise(e=>{this.on(ue.MagicIncomingWindowMessage.MAGIC_OVERLAY_READY,()=>e())})}listen(){this.on(ue.MagicIncomingWindowMessage.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()});this.on(ue.MagicIncomingWindowMessage.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()})}}}
//# sourceMappingURL=module$node_modules$$magic_sdk$provider$dist$cjs$index.js.map
