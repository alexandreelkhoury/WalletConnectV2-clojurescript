shadow$provide.module$node_modules$$ethersproject$providers$lib$json_rpc_batch_provider=function(global,require,module,exports){var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=
d}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});exports.JsonRpcBatchProvider=void 0;var properties_1=require("module$node_modules$$ethersproject$properties$lib$index"),web_1=require("module$node_modules$$ethersproject$web$lib$index");global=function(_super){function JsonRpcBatchProvider(){return null!==
_super&&_super.apply(this,arguments)||this}__extends(JsonRpcBatchProvider,_super);JsonRpcBatchProvider.prototype.send=function(method,params){var _this=this;method={method,params,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);var inflightRequest={request:method,resolve:null,reject:null};method=new Promise(function(resolve,reject){inflightRequest.resolve=resolve;inflightRequest.reject=reject});this._pendingBatch.push(inflightRequest);this._pendingBatchAggregator||
(this._pendingBatchAggregator=setTimeout(function(){var batch=_this._pendingBatch;_this._pendingBatch=null;_this._pendingBatchAggregator=null;var request=batch.map(function(inflight){return inflight.request});_this.emit("debug",{action:"requestBatch",request:(0,properties_1.deepCopy)(request),provider:_this});return(0,web_1.fetchJson)(_this.connection,JSON.stringify(request)).then(function(result){_this.emit("debug",{action:"response",request,response:result,provider:_this});batch.forEach(function(inflightRequest,
index){index=result[index];if(index.error){var error=Error(index.error.message);error.code=index.error.code;error.data=index.error.data;inflightRequest.reject(error)}else inflightRequest.resolve(index.result)})},function(error){_this.emit("debug",{action:"response",error,request,provider:_this});batch.forEach(function(inflightRequest){inflightRequest.reject(error)})})},10));return method};return JsonRpcBatchProvider}(require("module$node_modules$$ethersproject$providers$lib$json_rpc_provider").JsonRpcProvider);
exports.JsonRpcBatchProvider=global}
//# sourceMappingURL=module$node_modules$$ethersproject$providers$lib$json_rpc_batch_provider.js.map
