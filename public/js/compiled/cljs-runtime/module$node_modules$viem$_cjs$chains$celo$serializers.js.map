{
"version":3,
"file":"module$node_modules$viem$_cjs$chains$celo$serializers.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/viem/_cjs/chains/celo/serializers.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$viem$_cjs$chains$celo$serializers\"] = function(global,require,module,exports) {\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assertTransactionCIP42 = exports.serializersCelo = exports.serializeTransactionCelo = void 0;\nconst address_js_1 = require(\"../../errors/address.js\");\nconst base_js_1 = require(\"../../errors/base.js\");\nconst chain_js_1 = require(\"../../errors/chain.js\");\nconst node_js_1 = require(\"../../errors/node.js\");\nconst isAddress_js_1 = require(\"../../utils/address/isAddress.js\");\nconst concat_js_1 = require(\"../../utils/data/concat.js\");\nconst trim_js_1 = require(\"../../utils/data/trim.js\");\nconst toHex_js_1 = require(\"../../utils/encoding/toHex.js\");\nconst toRlp_js_1 = require(\"../../utils/encoding/toRlp.js\");\nconst serializeAccessList_js_1 = require(\"../../utils/transaction/serializeAccessList.js\");\nconst serializeTransaction_js_1 = require(\"../../utils/transaction/serializeTransaction.js\");\nconst serializeTransactionCelo = (tx, signature) => {\n    if (isCIP42(tx))\n        return serializeTransactionCIP42(tx, signature);\n    return (0, serializeTransaction_js_1.serializeTransaction)(tx, signature);\n};\nexports.serializeTransactionCelo = serializeTransactionCelo;\nexports.serializersCelo = {\n    transaction: exports.serializeTransactionCelo,\n};\nfunction serializeTransactionCIP42(transaction, signature) {\n    assertTransactionCIP42(transaction);\n    const { chainId, gas, nonce, to, value, maxFeePerGas, maxPriorityFeePerGas, accessList, feeCurrency, gatewayFeeRecipient, gatewayFee, data, } = transaction;\n    const serializedTransaction = [\n        (0, toHex_js_1.toHex)(chainId),\n        nonce ? (0, toHex_js_1.toHex)(nonce) : '0x',\n        maxPriorityFeePerGas ? (0, toHex_js_1.toHex)(maxPriorityFeePerGas) : '0x',\n        maxFeePerGas ? (0, toHex_js_1.toHex)(maxFeePerGas) : '0x',\n        gas ? (0, toHex_js_1.toHex)(gas) : '0x',\n        feeCurrency ?? '0x',\n        gatewayFeeRecipient ?? '0x',\n        gatewayFee ? (0, toHex_js_1.toHex)(gatewayFee) : '0x',\n        to ?? '0x',\n        value ? (0, toHex_js_1.toHex)(value) : '0x',\n        data ?? '0x',\n        (0, serializeAccessList_js_1.serializeAccessList)(accessList),\n    ];\n    if (signature) {\n        serializedTransaction.push(signature.v === 27n ? '0x' : (0, toHex_js_1.toHex)(1), (0, trim_js_1.trim)(signature.r), (0, trim_js_1.trim)(signature.s));\n    }\n    return (0, concat_js_1.concatHex)([\n        '0x7c',\n        (0, toRlp_js_1.toRlp)(serializedTransaction),\n    ]);\n}\nfunction isCIP42(transaction) {\n    if ('maxFeePerGas' in transaction &&\n        'maxPriorityFeePerGas' in transaction &&\n        ('feeCurrency' in transaction ||\n            'gatewayFee' in transaction ||\n            'gatewayFeeRecipient' in transaction))\n        return true;\n    return false;\n}\nconst MAX_MAX_FEE_PER_GAS = 115792089237316195423570985008687907853269984665640564039457584007913129639935n;\nfunction assertTransactionCIP42(transaction) {\n    const { chainId, maxPriorityFeePerGas, gasPrice, maxFeePerGas, to, feeCurrency, gatewayFee, gatewayFeeRecipient, } = transaction;\n    if (chainId <= 0)\n        throw new chain_js_1.InvalidChainIdError({ chainId });\n    if (to && !(0, isAddress_js_1.isAddress)(to))\n        throw new address_js_1.InvalidAddressError({ address: to });\n    if (gasPrice)\n        throw new base_js_1.BaseError('`gasPrice` is not a valid CIP-42 Transaction attribute.');\n    if (maxFeePerGas && maxFeePerGas > MAX_MAX_FEE_PER_GAS)\n        throw new node_js_1.FeeCapTooHighError({ maxFeePerGas });\n    if (maxPriorityFeePerGas &&\n        maxFeePerGas &&\n        maxPriorityFeePerGas > maxFeePerGas)\n        throw new node_js_1.TipAboveFeeCapError({ maxFeePerGas, maxPriorityFeePerGas });\n    if ((gatewayFee && !gatewayFeeRecipient) ||\n        (gatewayFeeRecipient && !gatewayFee)) {\n        throw new base_js_1.BaseError('`gatewayFee` and `gatewayFeeRecipient` must be provided together.');\n    }\n    if (feeCurrency && !feeCurrency?.startsWith('0x')) {\n        throw new base_js_1.BaseError('`feeCurrency` MUST be a token address for CIP-42 transactions.');\n    }\n    if (!feeCurrency && !gatewayFeeRecipient) {\n        throw new base_js_1.BaseError('Either `feeCurrency` or `gatewayFeeRecipient` must be provided for CIP-42 transactions.');\n    }\n}\nexports.assertTransactionCIP42 = assertTransactionCIP42;\n//# sourceMappingURL=serializers.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","assertTransactionCIP42","transaction","chainId","maxPriorityFeePerGas","gasPrice","maxFeePerGas","to","feeCurrency","gatewayFee","gatewayFeeRecipient","chain_js_1","InvalidChainIdError","isAddress_js_1","isAddress","address_js_1","InvalidAddressError","address","base_js_1","BaseError","MAX_MAX_FEE_PER_GAS","node_js_1","FeeCapTooHighError","TipAboveFeeCapError","startsWith","Object","defineProperty","value","serializersCelo","serializeTransactionCelo","concat_js_1","trim_js_1","toHex_js_1","toRlp_js_1","serializeAccessList_js_1","serializeTransaction_js_1","tx","signature","gas","nonce","accessList","data","serializedTransaction","toHex","serializeAccessList","push","v","trim","r","s","concatHex","toRlp","serializeTransaction"]
}
