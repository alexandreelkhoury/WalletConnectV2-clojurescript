shadow$provide.module$node_modules$viem$_cjs$utils$transaction$parseTransaction=function(global,require,module,exports){function toTransactionArray(serializedTransaction){return(0,fromRlp_js_1.fromRlp)(`0x${serializedTransaction.slice(4)}`,"hex")}function parseAccessList(accessList_){const accessList=[];for(let i=0;i<accessList_.length;i++){const [address,storageKeys]=accessList_[i];if(!(0,isAddress_js_1.isAddress)(address))throw new address_js_1.InvalidAddressError({address});accessList.push({address,
storageKeys:storageKeys.map(key=>(0,isHash_js_1.isHash)(key)?key:(0,trim_js_1.trim)(key))})}return accessList}function parseEIP155Signature(transactionArray){transactionArray=transactionArray.slice(-3);const v="0x"===transactionArray[0]||0n===(0,fromHex_js_1.hexToBigInt)(transactionArray[0])?27n:28n;return{r:(0,pad_js_1.padHex)(transactionArray[1],{size:32}),s:(0,pad_js_1.padHex)(transactionArray[2],{size:32}),v,yParity:27n===v?0:1}}Object.defineProperty(exports,"__esModule",{value:!0});exports.parseAccessList=
exports.toTransactionArray=exports.parseTransaction=void 0;const address_js_1=require("module$node_modules$viem$_cjs$errors$address"),transaction_js_1=require("module$node_modules$viem$_cjs$errors$transaction"),isAddress_js_1=require("module$node_modules$viem$_cjs$utils$address$isAddress"),isHex_js_1=require("module$node_modules$viem$_cjs$utils$data$isHex"),pad_js_1=require("module$node_modules$viem$_cjs$utils$data$pad"),trim_js_1=require("module$node_modules$viem$_cjs$utils$data$trim"),fromHex_js_1=
require("module$node_modules$viem$_cjs$utils$encoding$fromHex"),fromRlp_js_1=require("module$node_modules$viem$_cjs$utils$encoding$fromRlp"),isHash_js_1=require("module$node_modules$viem$_cjs$utils$hash$isHash"),assertTransaction_js_1=require("module$node_modules$viem$_cjs$utils$transaction$assertTransaction"),getSerializedTransactionType_js_1=require("module$node_modules$viem$_cjs$utils$transaction$getSerializedTransactionType");exports.parseTransaction=function(serializedTransaction){var type=(0,getSerializedTransactionType_js_1.getSerializedTransactionType)(serializedTransaction);
if("eip1559"===type){type=toTransactionArray(serializedTransaction);const [chainId,nonce,maxPriorityFeePerGas,maxFeePerGas,gas,to,value,data,accessList,v,r,s]=type;if(9!==type.length&&12!==type.length)throw new transaction_js_1.InvalidSerializedTransactionError({attributes:{chainId,nonce,maxPriorityFeePerGas,maxFeePerGas,gas,to,value,data,accessList,...(9<type.length?{v,r,s}:{})},serializedTransaction,type:"eip1559"});serializedTransaction={chainId:(0,fromHex_js_1.hexToNumber)(chainId),type:"eip1559"};
(0,isHex_js_1.isHex)(to)&&"0x"!==to&&(serializedTransaction.to=to);(0,isHex_js_1.isHex)(gas)&&"0x"!==gas&&(serializedTransaction.gas=(0,fromHex_js_1.hexToBigInt)(gas));(0,isHex_js_1.isHex)(data)&&"0x"!==data&&(serializedTransaction.data=data);(0,isHex_js_1.isHex)(nonce)&&"0x"!==nonce&&(serializedTransaction.nonce=(0,fromHex_js_1.hexToNumber)(nonce));(0,isHex_js_1.isHex)(value)&&"0x"!==value&&(serializedTransaction.value=(0,fromHex_js_1.hexToBigInt)(value));(0,isHex_js_1.isHex)(maxFeePerGas)&&"0x"!==
maxFeePerGas&&(serializedTransaction.maxFeePerGas=(0,fromHex_js_1.hexToBigInt)(maxFeePerGas));(0,isHex_js_1.isHex)(maxPriorityFeePerGas)&&"0x"!==maxPriorityFeePerGas&&(serializedTransaction.maxPriorityFeePerGas=(0,fromHex_js_1.hexToBigInt)(maxPriorityFeePerGas));0!==accessList.length&&"0x"!==accessList&&(serializedTransaction.accessList=parseAccessList(accessList));(0,assertTransaction_js_1.assertTransactionEIP1559)(serializedTransaction);return{...(12===type.length?parseEIP155Signature(type):void 0),
...serializedTransaction}}if("eip2930"===type){type=toTransactionArray(serializedTransaction);const [chainId,nonce,gasPrice,gas,to,value,data,accessList,v,r,s]=type;if(8!==type.length&&11!==type.length)throw new transaction_js_1.InvalidSerializedTransactionError({attributes:{chainId,nonce,gasPrice,gas,to,value,data,accessList,...(8<type.length?{v,r,s}:{})},serializedTransaction,type:"eip2930"});serializedTransaction={chainId:(0,fromHex_js_1.hexToNumber)(chainId),type:"eip2930"};(0,isHex_js_1.isHex)(to)&&
"0x"!==to&&(serializedTransaction.to=to);(0,isHex_js_1.isHex)(gas)&&"0x"!==gas&&(serializedTransaction.gas=(0,fromHex_js_1.hexToBigInt)(gas));(0,isHex_js_1.isHex)(data)&&"0x"!==data&&(serializedTransaction.data=data);(0,isHex_js_1.isHex)(nonce)&&"0x"!==nonce&&(serializedTransaction.nonce=(0,fromHex_js_1.hexToNumber)(nonce));(0,isHex_js_1.isHex)(value)&&"0x"!==value&&(serializedTransaction.value=(0,fromHex_js_1.hexToBigInt)(value));(0,isHex_js_1.isHex)(gasPrice)&&"0x"!==gasPrice&&(serializedTransaction.gasPrice=
(0,fromHex_js_1.hexToBigInt)(gasPrice));0!==accessList.length&&"0x"!==accessList&&(serializedTransaction.accessList=parseAccessList(accessList));(0,assertTransaction_js_1.assertTransactionEIP2930)(serializedTransaction);return{...(11===type.length?parseEIP155Signature(type):void 0),...serializedTransaction}}{type=(0,fromRlp_js_1.fromRlp)(serializedTransaction,"hex");const [nonce,gasPrice,gas,to,value,data,chainIdOrV_,r,s]=type;if(6!==type.length&&9!==type.length)throw new transaction_js_1.InvalidSerializedTransactionError({attributes:{nonce,
gasPrice,gas,to,value,data,...(6<type.length?{v:chainIdOrV_,r,s}:{})},serializedTransaction,type:"legacy"});serializedTransaction={type:"legacy"};(0,isHex_js_1.isHex)(to)&&"0x"!==to&&(serializedTransaction.to=to);(0,isHex_js_1.isHex)(gas)&&"0x"!==gas&&(serializedTransaction.gas=(0,fromHex_js_1.hexToBigInt)(gas));(0,isHex_js_1.isHex)(data)&&"0x"!==data&&(serializedTransaction.data=data);(0,isHex_js_1.isHex)(nonce)&&"0x"!==nonce&&(serializedTransaction.nonce=(0,fromHex_js_1.hexToNumber)(nonce));(0,isHex_js_1.isHex)(value)&&
"0x"!==value&&(serializedTransaction.value=(0,fromHex_js_1.hexToBigInt)(value));(0,isHex_js_1.isHex)(gasPrice)&&"0x"!==gasPrice&&(serializedTransaction.gasPrice=(0,fromHex_js_1.hexToBigInt)(gasPrice));(0,assertTransaction_js_1.assertTransactionLegacy)(serializedTransaction);if(6!==type.length)if(type=(0,isHex_js_1.isHex)(chainIdOrV_)&&"0x"!==chainIdOrV_?(0,fromHex_js_1.hexToBigInt)(chainIdOrV_):0n,"0x"===s&&"0x"===r)0<type&&(serializedTransaction.chainId=Number(type));else{var chainId$jscomp$0=Number((type-
35n)/2n);if(0<chainId$jscomp$0)serializedTransaction.chainId=chainId$jscomp$0;else if(27n!==type&&28n!==type)throw new transaction_js_1.InvalidLegacyVError({v:type});serializedTransaction.v=type;serializedTransaction.s=s;serializedTransaction.r=r}}return serializedTransaction};exports.toTransactionArray=toTransactionArray;exports.parseAccessList=parseAccessList}
//# sourceMappingURL=module$node_modules$viem$_cjs$utils$transaction$parseTransaction.js.map
