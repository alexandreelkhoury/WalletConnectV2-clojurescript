{
"version":3,
"file":"module$node_modules$$ethersproject$providers$lib$fallback_provider.js",
"lineCount":32,
"mappings":"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",
"sources":["node_modules/@ethersproject/providers/lib/fallback-provider.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$ethersproject$providers$lib$fallback_provider\"] = function(global,require,module,exports) {\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FallbackProvider = void 0;\nvar abstract_provider_1 = require(\"@ethersproject/abstract-provider\");\nvar bignumber_1 = require(\"@ethersproject/bignumber\");\nvar bytes_1 = require(\"@ethersproject/bytes\");\nvar properties_1 = require(\"@ethersproject/properties\");\nvar random_1 = require(\"@ethersproject/random\");\nvar web_1 = require(\"@ethersproject/web\");\nvar base_provider_1 = require(\"./base-provider\");\nvar formatter_1 = require(\"./formatter\");\nvar logger_1 = require(\"@ethersproject/logger\");\nvar _version_1 = require(\"./_version\");\nvar logger = new logger_1.Logger(_version_1.version);\nfunction now() { return (new Date()).getTime(); }\n// Returns to network as long as all agree, or null if any is null.\n// Throws an error if any two networks do not match.\nfunction checkNetworks(networks) {\n    var result = null;\n    for (var i = 0; i < networks.length; i++) {\n        var network = networks[i];\n        // Null! We do not know our network; bail.\n        if (network == null) {\n            return null;\n        }\n        if (result) {\n            // Make sure the network matches the previous networks\n            if (!(result.name === network.name && result.chainId === network.chainId &&\n                ((result.ensAddress === network.ensAddress) || (result.ensAddress == null && network.ensAddress == null)))) {\n                logger.throwArgumentError(\"provider mismatch\", \"networks\", networks);\n            }\n        }\n        else {\n            result = network;\n        }\n    }\n    return result;\n}\nfunction median(values, maxDelta) {\n    values = values.slice().sort();\n    var middle = Math.floor(values.length / 2);\n    // Odd length; take the middle\n    if (values.length % 2) {\n        return values[middle];\n    }\n    // Even length; take the average of the two middle\n    var a = values[middle - 1], b = values[middle];\n    if (maxDelta != null && Math.abs(a - b) > maxDelta) {\n        return null;\n    }\n    return (a + b) / 2;\n}\nfunction serialize(value) {\n    if (value === null) {\n        return \"null\";\n    }\n    else if (typeof (value) === \"number\" || typeof (value) === \"boolean\") {\n        return JSON.stringify(value);\n    }\n    else if (typeof (value) === \"string\") {\n        return value;\n    }\n    else if (bignumber_1.BigNumber.isBigNumber(value)) {\n        return value.toString();\n    }\n    else if (Array.isArray(value)) {\n        return JSON.stringify(value.map(function (i) { return serialize(i); }));\n    }\n    else if (typeof (value) === \"object\") {\n        var keys = Object.keys(value);\n        keys.sort();\n        return \"{\" + keys.map(function (key) {\n            var v = value[key];\n            if (typeof (v) === \"function\") {\n                v = \"[function]\";\n            }\n            else {\n                v = serialize(v);\n            }\n            return JSON.stringify(key) + \":\" + v;\n        }).join(\",\") + \"}\";\n    }\n    throw new Error(\"unknown value type: \" + typeof (value));\n}\n// Next request ID to use for emitting debug info\nvar nextRid = 1;\n;\nfunction stall(duration) {\n    var cancel = null;\n    var timer = null;\n    var promise = (new Promise(function (resolve) {\n        cancel = function () {\n            if (timer) {\n                clearTimeout(timer);\n                timer = null;\n            }\n            resolve();\n        };\n        timer = setTimeout(cancel, duration);\n    }));\n    var wait = function (func) {\n        promise = promise.then(func);\n        return promise;\n    };\n    function getPromise() {\n        return promise;\n    }\n    return { cancel: cancel, getPromise: getPromise, wait: wait };\n}\nvar ForwardErrors = [\n    logger_1.Logger.errors.CALL_EXCEPTION,\n    logger_1.Logger.errors.INSUFFICIENT_FUNDS,\n    logger_1.Logger.errors.NONCE_EXPIRED,\n    logger_1.Logger.errors.REPLACEMENT_UNDERPRICED,\n    logger_1.Logger.errors.UNPREDICTABLE_GAS_LIMIT\n];\nvar ForwardProperties = [\n    \"address\",\n    \"args\",\n    \"errorArgs\",\n    \"errorSignature\",\n    \"method\",\n    \"transaction\",\n];\n;\nfunction exposeDebugConfig(config, now) {\n    var result = {\n        weight: config.weight\n    };\n    Object.defineProperty(result, \"provider\", { get: function () { return config.provider; } });\n    if (config.start) {\n        result.start = config.start;\n    }\n    if (now) {\n        result.duration = (now - config.start);\n    }\n    if (config.done) {\n        if (config.error) {\n            result.error = config.error;\n        }\n        else {\n            result.result = config.result || null;\n        }\n    }\n    return result;\n}\nfunction normalizedTally(normalize, quorum) {\n    return function (configs) {\n        // Count the votes for each result\n        var tally = {};\n        configs.forEach(function (c) {\n            var value = normalize(c.result);\n            if (!tally[value]) {\n                tally[value] = { count: 0, result: c.result };\n            }\n            tally[value].count++;\n        });\n        // Check for a quorum on any given result\n        var keys = Object.keys(tally);\n        for (var i = 0; i < keys.length; i++) {\n            var check = tally[keys[i]];\n            if (check.count >= quorum) {\n                return check.result;\n            }\n        }\n        // No quroum\n        return undefined;\n    };\n}\nfunction getProcessFunc(provider, method, params) {\n    var normalize = serialize;\n    switch (method) {\n        case \"getBlockNumber\":\n            // Return the median value, unless there is (median + 1) is also\n            // present, in which case that is probably true and the median\n            // is going to be stale soon. In the event of a malicious node,\n            // the lie will be true soon enough.\n            return function (configs) {\n                var values = configs.map(function (c) { return c.result; });\n                // Get the median block number\n                var blockNumber = median(configs.map(function (c) { return c.result; }), 2);\n                if (blockNumber == null) {\n                    return undefined;\n                }\n                blockNumber = Math.ceil(blockNumber);\n                // If the next block height is present, its prolly safe to use\n                if (values.indexOf(blockNumber + 1) >= 0) {\n                    blockNumber++;\n                }\n                // Don't ever roll back the blockNumber\n                if (blockNumber >= provider._highestBlockNumber) {\n                    provider._highestBlockNumber = blockNumber;\n                }\n                return provider._highestBlockNumber;\n            };\n        case \"getGasPrice\":\n            // Return the middle (round index up) value, similar to median\n            // but do not average even entries and choose the higher.\n            // Malicious actors must compromise 50% of the nodes to lie.\n            return function (configs) {\n                var values = configs.map(function (c) { return c.result; });\n                values.sort();\n                return values[Math.floor(values.length / 2)];\n            };\n        case \"getEtherPrice\":\n            // Returns the median price. Malicious actors must compromise at\n            // least 50% of the nodes to lie (in a meaningful way).\n            return function (configs) {\n                return median(configs.map(function (c) { return c.result; }));\n            };\n        // No additional normalizing required; serialize is enough\n        case \"getBalance\":\n        case \"getTransactionCount\":\n        case \"getCode\":\n        case \"getStorageAt\":\n        case \"call\":\n        case \"estimateGas\":\n        case \"getLogs\":\n            break;\n        // We drop the confirmations from transactions as it is approximate\n        case \"getTransaction\":\n        case \"getTransactionReceipt\":\n            normalize = function (tx) {\n                if (tx == null) {\n                    return null;\n                }\n                tx = (0, properties_1.shallowCopy)(tx);\n                tx.confirmations = -1;\n                return serialize(tx);\n            };\n            break;\n        // We drop the confirmations from transactions as it is approximate\n        case \"getBlock\":\n            // We drop the confirmations from transactions as it is approximate\n            if (params.includeTransactions) {\n                normalize = function (block) {\n                    if (block == null) {\n                        return null;\n                    }\n                    block = (0, properties_1.shallowCopy)(block);\n                    block.transactions = block.transactions.map(function (tx) {\n                        tx = (0, properties_1.shallowCopy)(tx);\n                        tx.confirmations = -1;\n                        return tx;\n                    });\n                    return serialize(block);\n                };\n            }\n            else {\n                normalize = function (block) {\n                    if (block == null) {\n                        return null;\n                    }\n                    return serialize(block);\n                };\n            }\n            break;\n        default:\n            throw new Error(\"unknown method: \" + method);\n    }\n    // Return the result if and only if the expected quorum is\n    // satisfied and agreed upon for the final result.\n    return normalizedTally(normalize, provider.quorum);\n}\n// If we are doing a blockTag query, we need to make sure the backend is\n// caught up to the FallbackProvider, before sending a request to it.\nfunction waitForSync(config, blockNumber) {\n    return __awaiter(this, void 0, void 0, function () {\n        var provider;\n        return __generator(this, function (_a) {\n            provider = (config.provider);\n            if ((provider.blockNumber != null && provider.blockNumber >= blockNumber) || blockNumber === -1) {\n                return [2 /*return*/, provider];\n            }\n            return [2 /*return*/, (0, web_1.poll)(function () {\n                    return new Promise(function (resolve, reject) {\n                        setTimeout(function () {\n                            // We are synced\n                            if (provider.blockNumber >= blockNumber) {\n                                return resolve(provider);\n                            }\n                            // We're done; just quit\n                            if (config.cancelled) {\n                                return resolve(null);\n                            }\n                            // Try again, next block\n                            return resolve(undefined);\n                        }, 0);\n                    });\n                }, { oncePoll: provider })];\n        });\n    });\n}\nfunction getRunner(config, currentBlockNumber, method, params) {\n    return __awaiter(this, void 0, void 0, function () {\n        var provider, _a, filter;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    provider = config.provider;\n                    _a = method;\n                    switch (_a) {\n                        case \"getBlockNumber\": return [3 /*break*/, 1];\n                        case \"getGasPrice\": return [3 /*break*/, 1];\n                        case \"getEtherPrice\": return [3 /*break*/, 2];\n                        case \"getBalance\": return [3 /*break*/, 3];\n                        case \"getTransactionCount\": return [3 /*break*/, 3];\n                        case \"getCode\": return [3 /*break*/, 3];\n                        case \"getStorageAt\": return [3 /*break*/, 6];\n                        case \"getBlock\": return [3 /*break*/, 9];\n                        case \"call\": return [3 /*break*/, 12];\n                        case \"estimateGas\": return [3 /*break*/, 12];\n                        case \"getTransaction\": return [3 /*break*/, 15];\n                        case \"getTransactionReceipt\": return [3 /*break*/, 15];\n                        case \"getLogs\": return [3 /*break*/, 16];\n                    }\n                    return [3 /*break*/, 19];\n                case 1: return [2 /*return*/, provider[method]()];\n                case 2:\n                    if (provider.getEtherPrice) {\n                        return [2 /*return*/, provider.getEtherPrice()];\n                    }\n                    return [3 /*break*/, 19];\n                case 3:\n                    if (!(params.blockTag && (0, bytes_1.isHexString)(params.blockTag))) return [3 /*break*/, 5];\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\n                case 4:\n                    provider = _b.sent();\n                    _b.label = 5;\n                case 5: return [2 /*return*/, provider[method](params.address, params.blockTag || \"latest\")];\n                case 6:\n                    if (!(params.blockTag && (0, bytes_1.isHexString)(params.blockTag))) return [3 /*break*/, 8];\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\n                case 7:\n                    provider = _b.sent();\n                    _b.label = 8;\n                case 8: return [2 /*return*/, provider.getStorageAt(params.address, params.position, params.blockTag || \"latest\")];\n                case 9:\n                    if (!(params.blockTag && (0, bytes_1.isHexString)(params.blockTag))) return [3 /*break*/, 11];\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\n                case 10:\n                    provider = _b.sent();\n                    _b.label = 11;\n                case 11: return [2 /*return*/, provider[(params.includeTransactions ? \"getBlockWithTransactions\" : \"getBlock\")](params.blockTag || params.blockHash)];\n                case 12:\n                    if (!(params.blockTag && (0, bytes_1.isHexString)(params.blockTag))) return [3 /*break*/, 14];\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\n                case 13:\n                    provider = _b.sent();\n                    _b.label = 14;\n                case 14:\n                    if (method === \"call\" && params.blockTag) {\n                        return [2 /*return*/, provider[method](params.transaction, params.blockTag)];\n                    }\n                    return [2 /*return*/, provider[method](params.transaction)];\n                case 15: return [2 /*return*/, provider[method](params.transactionHash)];\n                case 16:\n                    filter = params.filter;\n                    if (!((filter.fromBlock && (0, bytes_1.isHexString)(filter.fromBlock)) || (filter.toBlock && (0, bytes_1.isHexString)(filter.toBlock)))) return [3 /*break*/, 18];\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\n                case 17:\n                    provider = _b.sent();\n                    _b.label = 18;\n                case 18: return [2 /*return*/, provider.getLogs(filter)];\n                case 19: return [2 /*return*/, logger.throwError(\"unknown method error\", logger_1.Logger.errors.UNKNOWN_ERROR, {\n                        method: method,\n                        params: params\n                    })];\n            }\n        });\n    });\n}\nvar FallbackProvider = /** @class */ (function (_super) {\n    __extends(FallbackProvider, _super);\n    function FallbackProvider(providers, quorum) {\n        var _this = this;\n        if (providers.length === 0) {\n            logger.throwArgumentError(\"missing providers\", \"providers\", providers);\n        }\n        var providerConfigs = providers.map(function (configOrProvider, index) {\n            if (abstract_provider_1.Provider.isProvider(configOrProvider)) {\n                var stallTimeout = (0, formatter_1.isCommunityResource)(configOrProvider) ? 2000 : 750;\n                var priority = 1;\n                return Object.freeze({ provider: configOrProvider, weight: 1, stallTimeout: stallTimeout, priority: priority });\n            }\n            var config = (0, properties_1.shallowCopy)(configOrProvider);\n            if (config.priority == null) {\n                config.priority = 1;\n            }\n            if (config.stallTimeout == null) {\n                config.stallTimeout = (0, formatter_1.isCommunityResource)(configOrProvider) ? 2000 : 750;\n            }\n            if (config.weight == null) {\n                config.weight = 1;\n            }\n            var weight = config.weight;\n            if (weight % 1 || weight > 512 || weight < 1) {\n                logger.throwArgumentError(\"invalid weight; must be integer in [1, 512]\", \"providers[\" + index + \"].weight\", weight);\n            }\n            return Object.freeze(config);\n        });\n        var total = providerConfigs.reduce(function (accum, c) { return (accum + c.weight); }, 0);\n        if (quorum == null) {\n            quorum = total / 2;\n        }\n        else if (quorum > total) {\n            logger.throwArgumentError(\"quorum will always fail; larger than total weight\", \"quorum\", quorum);\n        }\n        // Are all providers' networks are known\n        var networkOrReady = checkNetworks(providerConfigs.map(function (c) { return (c.provider).network; }));\n        // Not all networks are known; we must stall\n        if (networkOrReady == null) {\n            networkOrReady = new Promise(function (resolve, reject) {\n                setTimeout(function () {\n                    _this.detectNetwork().then(resolve, reject);\n                }, 0);\n            });\n        }\n        _this = _super.call(this, networkOrReady) || this;\n        // Preserve a copy, so we do not get mutated\n        (0, properties_1.defineReadOnly)(_this, \"providerConfigs\", Object.freeze(providerConfigs));\n        (0, properties_1.defineReadOnly)(_this, \"quorum\", quorum);\n        _this._highestBlockNumber = -1;\n        return _this;\n    }\n    FallbackProvider.prototype.detectNetwork = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var networks;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, Promise.all(this.providerConfigs.map(function (c) { return c.provider.getNetwork(); }))];\n                    case 1:\n                        networks = _a.sent();\n                        return [2 /*return*/, checkNetworks(networks)];\n                }\n            });\n        });\n    };\n    FallbackProvider.prototype.perform = function (method, params) {\n        return __awaiter(this, void 0, void 0, function () {\n            var results, i_1, result, processFunc, configs, currentBlockNumber, i, first, _loop_1, this_1, state_1;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(method === \"sendTransaction\")) return [3 /*break*/, 2];\n                        return [4 /*yield*/, Promise.all(this.providerConfigs.map(function (c) {\n                                return c.provider.sendTransaction(params.signedTransaction).then(function (result) {\n                                    return result.hash;\n                                }, function (error) {\n                                    return error;\n                                });\n                            }))];\n                    case 1:\n                        results = _a.sent();\n                        // Any success is good enough (other errors are likely \"already seen\" errors\n                        for (i_1 = 0; i_1 < results.length; i_1++) {\n                            result = results[i_1];\n                            if (typeof (result) === \"string\") {\n                                return [2 /*return*/, result];\n                            }\n                        }\n                        // They were all an error; pick the first error\n                        throw results[0];\n                    case 2:\n                        if (!(this._highestBlockNumber === -1 && method !== \"getBlockNumber\")) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.getBlockNumber()];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4:\n                        processFunc = getProcessFunc(this, method, params);\n                        configs = (0, random_1.shuffled)(this.providerConfigs.map(properties_1.shallowCopy));\n                        configs.sort(function (a, b) { return (a.priority - b.priority); });\n                        currentBlockNumber = this._highestBlockNumber;\n                        i = 0;\n                        first = true;\n                        _loop_1 = function () {\n                            var t0, inflightWeight, _loop_2, waiting, results, result, errors;\n                            return __generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        t0 = now();\n                                        inflightWeight = configs.filter(function (c) { return (c.runner && ((t0 - c.start) < c.stallTimeout)); })\n                                            .reduce(function (accum, c) { return (accum + c.weight); }, 0);\n                                        _loop_2 = function () {\n                                            var config = configs[i++];\n                                            var rid = nextRid++;\n                                            config.start = now();\n                                            config.staller = stall(config.stallTimeout);\n                                            config.staller.wait(function () { config.staller = null; });\n                                            config.runner = getRunner(config, currentBlockNumber, method, params).then(function (result) {\n                                                config.done = true;\n                                                config.result = result;\n                                                if (_this.listenerCount(\"debug\")) {\n                                                    _this.emit(\"debug\", {\n                                                        action: \"request\",\n                                                        rid: rid,\n                                                        backend: exposeDebugConfig(config, now()),\n                                                        request: { method: method, params: (0, properties_1.deepCopy)(params) },\n                                                        provider: _this\n                                                    });\n                                                }\n                                            }, function (error) {\n                                                config.done = true;\n                                                config.error = error;\n                                                if (_this.listenerCount(\"debug\")) {\n                                                    _this.emit(\"debug\", {\n                                                        action: \"request\",\n                                                        rid: rid,\n                                                        backend: exposeDebugConfig(config, now()),\n                                                        request: { method: method, params: (0, properties_1.deepCopy)(params) },\n                                                        provider: _this\n                                                    });\n                                                }\n                                            });\n                                            if (this_1.listenerCount(\"debug\")) {\n                                                this_1.emit(\"debug\", {\n                                                    action: \"request\",\n                                                    rid: rid,\n                                                    backend: exposeDebugConfig(config, null),\n                                                    request: { method: method, params: (0, properties_1.deepCopy)(params) },\n                                                    provider: this_1\n                                                });\n                                            }\n                                            inflightWeight += config.weight;\n                                        };\n                                        // Start running enough to meet quorum\n                                        while (inflightWeight < this_1.quorum && i < configs.length) {\n                                            _loop_2();\n                                        }\n                                        waiting = [];\n                                        configs.forEach(function (c) {\n                                            if (c.done || !c.runner) {\n                                                return;\n                                            }\n                                            waiting.push(c.runner);\n                                            if (c.staller) {\n                                                waiting.push(c.staller.getPromise());\n                                            }\n                                        });\n                                        if (!waiting.length) return [3 /*break*/, 2];\n                                        return [4 /*yield*/, Promise.race(waiting)];\n                                    case 1:\n                                        _b.sent();\n                                        _b.label = 2;\n                                    case 2:\n                                        results = configs.filter(function (c) { return (c.done && c.error == null); });\n                                        if (!(results.length >= this_1.quorum)) return [3 /*break*/, 5];\n                                        result = processFunc(results);\n                                        if (result !== undefined) {\n                                            // Shut down any stallers\n                                            configs.forEach(function (c) {\n                                                if (c.staller) {\n                                                    c.staller.cancel();\n                                                }\n                                                c.cancelled = true;\n                                            });\n                                            return [2 /*return*/, { value: result }];\n                                        }\n                                        if (!!first) return [3 /*break*/, 4];\n                                        return [4 /*yield*/, stall(100).getPromise()];\n                                    case 3:\n                                        _b.sent();\n                                        _b.label = 4;\n                                    case 4:\n                                        first = false;\n                                        _b.label = 5;\n                                    case 5:\n                                        errors = configs.reduce(function (accum, c) {\n                                            if (!c.done || c.error == null) {\n                                                return accum;\n                                            }\n                                            var code = (c.error).code;\n                                            if (ForwardErrors.indexOf(code) >= 0) {\n                                                if (!accum[code]) {\n                                                    accum[code] = { error: c.error, weight: 0 };\n                                                }\n                                                accum[code].weight += c.weight;\n                                            }\n                                            return accum;\n                                        }, ({}));\n                                        Object.keys(errors).forEach(function (errorCode) {\n                                            var tally = errors[errorCode];\n                                            if (tally.weight < _this.quorum) {\n                                                return;\n                                            }\n                                            // Shut down any stallers\n                                            configs.forEach(function (c) {\n                                                if (c.staller) {\n                                                    c.staller.cancel();\n                                                }\n                                                c.cancelled = true;\n                                            });\n                                            var e = (tally.error);\n                                            var props = {};\n                                            ForwardProperties.forEach(function (name) {\n                                                if (e[name] == null) {\n                                                    return;\n                                                }\n                                                props[name] = e[name];\n                                            });\n                                            logger.throwError(e.reason || e.message, errorCode, props);\n                                        });\n                                        // All configs have run to completion; we will never get more data\n                                        if (configs.filter(function (c) { return !c.done; }).length === 0) {\n                                            return [2 /*return*/, \"break\"];\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        };\n                        this_1 = this;\n                        _a.label = 5;\n                    case 5:\n                        if (!true) return [3 /*break*/, 7];\n                        return [5 /*yield**/, _loop_1()];\n                    case 6:\n                        state_1 = _a.sent();\n                        if (typeof state_1 === \"object\")\n                            return [2 /*return*/, state_1.value];\n                        if (state_1 === \"break\")\n                            return [3 /*break*/, 7];\n                        return [3 /*break*/, 5];\n                    case 7:\n                        // Shut down any stallers; shouldn't be any\n                        configs.forEach(function (c) {\n                            if (c.staller) {\n                                c.staller.cancel();\n                            }\n                            c.cancelled = true;\n                        });\n                        return [2 /*return*/, logger.throwError(\"failed to meet quorum\", logger_1.Logger.errors.SERVER_ERROR, {\n                                method: method,\n                                params: params,\n                                //results: configs.map((c) => c.result),\n                                //errors: configs.map((c) => c.error),\n                                results: configs.map(function (c) { return exposeDebugConfig(c); }),\n                                provider: this\n                            })];\n                }\n            });\n        });\n    };\n    return FallbackProvider;\n}(base_provider_1.BaseProvider));\nexports.FallbackProvider = FallbackProvider;\n//# sourceMappingURL=fallback-provider.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","checkNetworks","networks","result","i","length","network","name","chainId","ensAddress","logger","throwArgumentError","median","values","maxDelta","slice","sort","middle","Math","floor","a","b","abs","serialize","value","JSON","stringify","bignumber_1","BigNumber","isBigNumber","toString","Array","isArray","map","keys","Object","key","v","join","Error","stall","duration","cancel","timer","promise","Promise","resolve","clearTimeout","setTimeout","getPromise","wait","func","then","exposeDebugConfig","config","now","weight","defineProperty","get","provider","start","done","error","normalizedTally","normalize","quorum","configs","tally","forEach","c","count","check","getProcessFunc","method","params","blockNumber","_highestBlockNumber","ceil","indexOf","tx","properties_1","shallowCopy","confirmations","includeTransactions","block","transactions","waitForSync","__awaiter","__generator","_a","web_1","poll","reject","cancelled","undefined","oncePoll","getRunner","currentBlockNumber","filter","_b","label","getEtherPrice","blockTag","bytes_1","isHexString","sent","address","getStorageAt","position","blockHash","transaction","transactionHash","fromBlock","toBlock","getLogs","throwError","logger_1","Logger","errors","UNKNOWN_ERROR","__extends","extendStatics","d","setPrototypeOf","__proto__","p","prototype","hasOwnProperty","call","__","constructor","TypeError","String","create","thisArg","_arguments","P","generator","adopt","fulfilled","step","next","e","rejected","apply","body","verb","n","op","f","_","y","t","ops","pop","trys","push","g","Symbol","iterator","FallbackProvider","abstract_provider_1","random_1","base_provider_1","formatter_1","_version_1","version","nextRid","ForwardErrors","CALL_EXCEPTION","INSUFFICIENT_FUNDS","NONCE_EXPIRED","REPLACEMENT_UNDERPRICED","UNPREDICTABLE_GAS_LIMIT","ForwardProperties","_super","providers","_this","providerConfigs","configOrProvider","index","Provider","isProvider","stallTimeout","isCommunityResource","freeze","priority","total","reduce","accum","networkOrReady","detectNetwork","defineReadOnly","FallbackProvider.prototype.detectNetwork","all","getNetwork","perform","FallbackProvider.prototype.perform","results","i_1","processFunc","first","_loop_1","this_1","state_1","sendTransaction","signedTransaction","hash","getBlockNumber","shuffled","t0","inflightWeight","_loop_2","waiting","getTime","Date","runner","rid","staller","listenerCount","emit","action","backend","request","deepCopy","race","code","errorCode","props","reason","message","SERVER_ERROR","BaseProvider"]
}
